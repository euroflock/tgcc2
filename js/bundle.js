!function(t){function e(o){if(a[o])return a[o].exports;var i=a[o]={exports:{},id:o,loaded:!1};return t[o].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var a={};return e.m=t,e.c=a,e.p="",e(0)}([function(t,e,a){a(1),a(3),a(5),a(2),a(4),a(6),a(7),a(9),t.exports=a(8)},function(t,e,a){var o=a(2).ClientApp;!function(){window.clientApp=new o,clientApp.run()}()},function(t,e,a){var o=a(3),i=a(4).EventDriven,n=a(5).Chart,r=a(9).MainView,s=function(){this.device=null,this.mainView=null,this.chartsData=null,this.charts=null};o.extend(s,i),s.prototype.run=function(){o.getElement("body").innerHTML="",o.getElement("title").innerText="TELEGRAM CONTEST CHARTS",o.on("body","contextmenu",function(t){o.no(t,!0)});try{document.createEvent("TouchEvent"),this.device="touch"}catch(t){this.device="mouse"}var t=this;this.chartsData=[];var e=localStorage.getItem("theme");e=["light","dark"].indexOf(e)!==-1?e:"dark",this.mainView=new r({app:this,className:"main-view "+e,appendTo:o.getElement("body")}),o.on(this.mainView.switchThemeToDay,"click",function(e){o.no(e,!0),o.toggleClass(t.mainView.switchThemeToDay,"active",!1),o.toggleClass(t.mainView.switchThemeToNight,"active",!0),o.toggleClass(t.mainView.$container,"dark",!1),localStorage.setItem("theme","light"),t.charts.map(function(t){t.model.renderStyle="light",t.refreshModel()})}),o.on(this.mainView.switchThemeToNight,"click",function(e){o.no(e,!0),o.toggleClass(t.mainView.switchThemeToNight,"active",!1),o.toggleClass(t.mainView.switchThemeToDay,"active",!0),o.toggleClass(t.mainView.$container,"dark",!0),localStorage.setItem("theme","dark"),t.charts.map(function(t){t.model.renderStyle="dark",t.refreshModel()})});for(var a=1;a<=5;a++)this.fetchRemoteData("./data/"+a+"/overview.json",a,function(o,i){t.chartsData[a-1]=o;var r="chart"+i,s="TITLE";switch(i){case 1:s="Followers";break;case 2:s="Interactions";break;case 3:s="Messages";break;case 4:s="Views";break;case 5:s="Apps"}t[r]=new n({id:r,index:i,title:s,app:t,defaultTheme:e,chartData:o,appendTo:t.mainView.chartsContainer}),t.charts||(t.charts=[]),t.charts.push(t[r])});switch(e){case"light":o.toggleClass(t.mainView.switchThemeToNight,"active",!0);break;default:o.toggleClass(t.mainView.switchThemeToDay,"active",!0)}window.onresize=function(){this.onViewResize()}.bind(this)},s.prototype.onViewResize=function(){this.trigger("resize")},s.prototype.fetchRemoteData=function(t,e,a){o.remoteRequest(t,function(t){var o,i,n,r,s,l,d,h,m;try{if(i=JSON.parse(t),r=[],n=i,s={lines:{},names:n.names,actives:[],keys:Object.keys(n.names),colors:n.colors,types:n.types,stacked:!!n.stacked,percentage:!!n.percentage,y_scaled:!!n.y_scaled},n.names){l=Object.keys(n.columns);for(o in l)d=l[o],h=n.columns[d],m=h[0],h.shift(),h.push(null),s.lines[m]=h,s.actives[m]=!0}r=s}catch(t){r=null}a(r,e)})},e.ClientApp=s},function(t,e){var a=CanvasRenderingContext2D.prototype.moveTo,o=CanvasRenderingContext2D.prototype.lineTo,i=CanvasRenderingContext2D.prototype.quadraticCurveTo,n=CanvasRenderingContext2D.prototype.fillRect,r=CanvasRenderingContext2D.prototype.strokeRect,s=CanvasRenderingContext2D.prototype.rect,l=CanvasRenderingContext2D.prototype.clearRect;CanvasRenderingContext2D.prototype.moveTo=function(t,e){t=t>0?~~t:t,e=e>0?~~e:e,this.lineWidth%2!==0&&(t+=.5,e+=.5),a.apply(this,arguments)},CanvasRenderingContext2D.prototype.lineTo=function(t,e){t=t>0?~~t:t,e=e>0?~~e:e,this.lineWidth%2!==0&&(t+=.5,e+=.5),o.apply(this,arguments)},CanvasRenderingContext2D.prototype.quadraticCurveTo=function(t,e,a,o){t=t>0?~~t:t,e=e>0?~~e:e,a=a>0?~~a:a,o=o>0?~~o:o,this.lineWidth%2!==0&&(t+=.5,e+=.5,a+=.5,o+=.5),i.apply(this,arguments)},CanvasRenderingContext2D.prototype.fillRect=function(t,e,a,o){t=~~t,e=~~e,a=~~a,o=~~o,n.apply(this,arguments)},CanvasRenderingContext2D.prototype.strokeRect=function(t,e,a,o){t=~~t,e=~~e,a=~~a,o=~~o,r.apply(this,arguments)},CanvasRenderingContext2D.prototype.rect=function(t,e,a,o){t=~~t,e=~~e,a=~~a,o=~~o,s.apply(this,arguments)},CanvasRenderingContext2D.prototype.roundRect=function(t,e,a,o,i,n,r){var s={upperLeft:0,upperRight:0,lowerLeft:0,lowerRight:0};"undefined"==typeof r&&(r=!0);var l;if("object"==typeof i)for(l in i)s[l]=i[l];if("number"==typeof i)for(l in s)s[l]=i;this.beginPath(),this.moveTo(t+s.upperLeft,e),this.lineTo(t+a-s.upperRight,e),this.quadraticCurveTo(t+a,e,t+a,e+s.upperRight),this.lineTo(t+a,e+o-s.lowerRight),this.quadraticCurveTo(t+a,e+o,t+a-s.lowerRight,e+o),this.lineTo(t+s.lowerLeft,e+o),this.quadraticCurveTo(t,e+o,t,e+o-s.lowerLeft),this.lineTo(t,e+s.upperLeft),this.quadraticCurveTo(t,e,t+s.upperLeft,e),this.closePath(),r&&this.stroke(),n&&this.fill()},CanvasRenderingContext2D.prototype.clearRect=function(t,e,a,o){t=~~t,e=~~e,a=~~a,o=~~o,l.apply(this,arguments)},CanvasRenderingContext2D.prototype.dashedLinePattern=function(t,e,a,o,i,n,r,s){this.save(),this.beginPath(),this.strokeStyle=n||this.strokeStyle||"red",this.lineWidth=r||1,this.lineCap=s||"butt";var l=Math.sqrt(Math.pow(a-t,2)+Math.pow(o-e,2)),d={x:(a-t)/l,y:(o-e)/l},h=0,m=0;for(i=i&&i.length?i:[4,4];h<l;){var c=Math.min(i[m++%i.length],l-h),p=m%2;h+=c,p&&this.moveTo(t+.5,e+.5),t+=c*d.x,e+=c*d.y,p&&this.lineTo(t+.5,e+.5)}this.stroke(),this.restore()},window.requestAnimationFrame||(window.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t,e){var a=(new Date).getTime(),o=Math.max(0,16-(a-("undefined"!=typeof lastTime?lastTime:0))),i=window.setTimeout(function(){t(a+o)},o);return lastTime=a+o,i}}()),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)}),"NodeList"in window&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(t,e){e=e||window;for(var a=0;a<this.length;a++)t.call(e,this[a],a,this)}),Math.log2=Math.log2||function(t){return Math.log(t)/Math.log(2)},e.inherit=function(t,e){if(!t)throw"Inherit - child undefined!";if(!e)throw"Inherit - parent undefined!";var a,o,i=t.prototype;t.prototype=Object.create(e.prototype);var n=Object.getOwnPropertyNames(i);for(a=n.length;a--;)i.hasOwnProperty(n[a])&&(o=Object.getOwnPropertyDescriptor(i,n[a]),Object.defineProperty(t.prototype,n[a],o));t.prototype.constructor=t,t.superclass=e.prototype},e.extend=function t(e,a,o){if(!e)throw"Extend - class undefined!";if(!a)throw"Extend - trait undefined!";var i=a,n=o?e:e.prototype;a.prototype&&t(e,a.prototype,o);for(var r in i){var s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(n,r,s)}},e.no=function(t,e){"undefined"!=typeof t.preventDefault&&t.preventDefault(),"undefined"!=typeof t.returnValue&&(t.returnValue=!1),e===!0&&("undefined"!=typeof t.stopPropagation&&t.stopPropagation(),"undefined"!=typeof t.cancelBubble&&(t.cancelBubble=!0))},e.calculateWidth=function(t,e){this.canvas||(this.canvas=h({tag:"canvas",class_name:"technical",attributes:[{width:"100"},{height:"100"}]}),this.ctx=this.canvas.getContext("2d"),this.fontFamily="Tahoma",this.fontSize=12,this.paddingLeft=5,this.paddingRight=5,this.ctx.font=this.fontSize+"px "+this.fontFamily),t=t||"",e=e||{};var a=!1;e.fontFamily&&"string"==typeof e.fontFamily&&(this.fontFamily=e.fontFamily,a=!0),e.fontSize&&"number"==typeof e.fontSize&&(this.fontSize=e.fontSize,a=!0),a&&(this.ctx.font=this.fontSize+"px "+this.fontFamily),null!=e.paddingLeft&&"number"==typeof e.paddingLeft&&(this.paddingLeft=e.paddingLeft),null!=e.paddingRight&&"number"==typeof e.paddingRight&&(this.paddingRight=e.paddingRight);var o=this.ctx.measureText(t);return this.paddingLeft+o.width+this.paddingRight};var d=function(t){return"undefined"!=typeof t&&t?"string"==typeof t?document.querySelector(t):t instanceof HTMLElement?t:null:null};e.getElement=d;var h=function(t){if("object"!=typeof t)return null;var a,o,i,n,r,s,l,h,m;if(a="string"!=typeof t.tag?"DIV":t.tag.toUpperCase(),"br"==a.toLowerCase())return null;o=t.id||null,"?"==o&&(o=a+e.uid()),"undefined"==typeof t.target||null==t.target||(i="string"==typeof i?d(i):t.target),n="undefined"!=typeof t.display?t.display===!0:null,r=t.class_name||null,s=t.style||null,l=t.attributes||null,m=t.before||null,h=t.html||null;var c=document.createElement(a);return null!==o&&(c.id=o),null!==r&&(c.className=r),null!==h&&(c.innerHTML=h),null!==s&&c.setAttribute("style",s),n===!1&&(c.style.display="none"),null!==l&&l.length>0&&l.forEach(function(t){c.setAttribute(Object.keys(t)[0],t[Object.keys(t)[0]])}),"undefined"!=typeof m?("number"==typeof m?m=i.children[m]:"string"==typeof m&&(m=d(m)),i&&i.insertBefore(c,m)):i&&i.appendChild(c),c};e.createElement=h,e.hasClass=function(t,e){return"undefined"!=typeof e&&(t=d(t),!!t&&t.className.indexOf(e)!==-1)},e.addClass=function(t,e){return"undefined"!=typeof e&&(!!(t=d(t))&&(t.className.indexOf(e)===-1&&(t.className=(t.className+" "+e).trim(),t)))},e.removeClass=function(t,e){if(t=d(t),!t)return!1;if("undefined"!=typeof e){var a=t.className;return t.className=a.replace(e,"").trim(),t}},e.toggleClass=function(t,a,o){return t=d(t),!!t&&("undefined"!=typeof a?"undefined"!=typeof o?o===!0?e.addClass(t,a):e.removeClass(t,a):e.hasClass(t,a)?e.removeClass(t,a):e.addClass(t,a):void 0)};var m=function(t){for(var e=0,a=0;t;)a+=parseInt(t.offsetTop,10),e+=parseInt(t.offsetLeft,10),t=el_.offsetParent;return{left:e,top:a}},c=function(t){var e=t.getBoundingClientRect(),a=document.body,o=document.documentElement,i=window.pageYOffset||o.scrollTop||a.scrollTop,n=window.pageXOffset||o.scrollLeft||a.scrollLeft,r=o.clientTop||a.clientTop||0,s=o.clientLeft||a.clientLeft||0,l=e.top+i-r,d=e.left+n-s;return{left:Math.round(d),top:Math.round(l)}},p=function(t){return t=d(t),!!t&&(t.getBoundingClientRect?c(t):m(t))};e.box=function(t,e,a){if(t=d(t),!t)return!1;if("undefined"==typeof e||"object"!=typeof e){var o=p(t),i=o.left,n=o.top,r=t.offsetWidth,s=t.offsetHeight;return{l:i,t:n,w:r,h:s,left:i,top:n,width:r,height:s}}return a!==!0&&(t.style.position="absolute"),"undefined"!=typeof e.l?t.style.left=""+e.l+"px":"undefined"!=typeof e.left&&(t.style.left=""+e.left+"px"),"undefined"!=typeof e.t?t.style.top=""+e.t+"px":"undefined"!=typeof e.top&&(t.style.top=""+e.top+"px"),"undefined"!=typeof e.w?t.style.width=""+e.w+"px":"undefined"!=typeof e.width&&(t.style.width=""+e.width+"px"),"undefined"!=typeof e.h?t.style.height=""+e.h+"px":"undefined"!=typeof e.height&&(t.style.height=""+e.height+"px"),t},e.isPointInBox=function(t,a,o){var i=t.x||t.pageX,n=t.y||t.pageY,r=!1;return i>=a.l&&i<=a.l+a.w&&n>=a.t&&n<=a.t+a.h&&(r=!0),r&&"undefined"!=typeof o&&(r=e.isPointInBox(t,o)),r};var f,u;document.addEventListener?(f=function(t,e,a,o){return!!(t=d(t))&&(t.addEventListener(e,a,!!o),a)},u=function(t,e,a,o){return!!(t=d(t))&&(t.removeEventListener(e,a,!!o),!0)}):document.attachEvent?(f=function(t,e,a){if(t=d(t),!t)return!1;e="on"+e;var o=function(){return a.apply(t,arguments)};return t.attachEvent(e,o),o},u=function(t,e,a){return!!(t=d(t))&&(e="on"+e,t.detachEvent(e,a),!0)}):(f=function(t,e,a){if(t=d(t),!t)return!1;e="on"+e,t.store=t.store||{},t.store[e]||(t.store[e]={counter:1},t[e]=function(){for(var t in o)o.hasOwnProperty(t)&&"function"==typeof o[t]&&o[t].apply(this,arguments)});var o=t.store[e],i=o.counter++;return o[i]=a,i},u=function(t,e,a){return!!(t=d(t))&&(e="on"+e,t.store&&t.store[e]&&t.store[e][a]&&(t.store[e][a]=void 0),!0)}),e.on=f,e.off=u,e.remoteRequest=function(t,e,a,o){var i=function(t,e){var a,o="",i=encodeURIComponent;for(a in t)o+="&"+i(a)+"="+i(t[a]);return o.slice(1)+(e?"":"&_t="+Date.now())};a&&"object"==typeof a&&(a=i(a,o));try{var n=new XMLHttpRequest("MSXML2.XMLHTTP.3.0");n.open(a?"POST":"GET",t,1),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.setRequestHeader("Content-type",(a?"application/x-www-form-urlencoded":"application/json")+"; charset=UTF-8"),n.onreadystatechange=function(){n.readyState>3&&e&&e(n.responseText,n)},n.send(a)}catch(t){console.error(t.message)}},e.formatTo3=function(t,e){e=e||" ";for(var a=""+t,o="",i=a.length-1;i>=0;i-=3)o=(a[i-2]||"")+(a[i-1]||"")+(a[i]||"")+(i==a.length-1?"":e)+o;return o},e.toFixed=function(t,e){return e=e||0,Number(t).toFixed(e)},e.collapseNumber=function(t,a){return a=a||0,"number"==typeof t&&(t=e.toFixed(t,a)),void 0===t&&(t=""),e.formatNumber(t,{digitsAfterDot:a}).replace(/0{6}$/,"M").replace(/0{3}$/,"K")},e.separateThousandsInInteger=function(t,e){null==e&&(e=" ");for(var a=parseInt(t).toString();/(\d+)(\d{3})/.test(a);)a=a.toString().replace(/(\d+)(\d{3})/,"$1"+e+"$2");return a},e.formatNumber=function(t,a){if(null==t)return"â€”";if("string"==typeof t&&""===t.trim())return 0;"string"==typeof t&&(t=Number(t)),a=a||{},a.thousandsSeparator=a.thousandsSeparator||" ",a.digitsAfterDot=void 0!==a.digitsAfterDot?a.digitsAfterDot:2;var o=Number(String(t).replace(/\s/g,"")),i=o/Math.abs(o);o=Math.abs(o),o=Math.round(o,a.digitsAfterDot);var n=e.separateThousandsInInteger(Math.floor(o),a.thousandsSeparator),r=e.toFixed(o,a.digitsAfterDot).split(".")[1]||"";return r&&(r="."+r),i<0&&(n="-"+n),n+r};var g=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],w=["January","February","March","April","May","June","July","August","September","October","November","December"];e.formatDate=function(t,e){var a=new Date(e);switch(t){case"Week, d Month YEAR":return g[a.getUTCDay()]+", "+a.getUTCDate()+" "+w[a.getUTCMonth()]+" "+a.getUTCFullYear();case"Wee, d Mon YEAR":return g[a.getUTCDay()].slice(0,3)+", "+a.getUTCDate()+" "+w[a.getUTCMonth()].slice(0,3)+" "+a.getUTCFullYear();case"d Month YEAR":return a.getUTCDate()+" "+w[a.getUTCMonth()]+" "+a.getUTCFullYear();case"d Mon YEAR":return a.getUTCDate()+" "+w[a.getUTCMonth()].slice(0,3)+" "+a.getUTCFullYear();case"d/M/YEAR":return a.getUTCDate()+"/"+(a.getUTCMonth()+1)+"/"+a.getUTCFullYear();case"d Month":return a.getUTCDate()+" "+w[a.getUTCMonth()];case"d Mon":return a.getUTCDate()+" "+w[a.getUTCMonth()].slice(0,3);case"d Mon hh:ii":var o=a.getUTCHours();o.toString().length<2&&(o="0"+o.toString());var i=a.getUTCMinutes();return i.toString().length<2&&(i="0"+i.toString()),a.getUTCDate()+" "+w[a.getUTCMonth()].slice(0,3)+" "+o+":"+i;case"hh:ii":var o=a.getUTCHours();o.toString().length<2&&(o="0"+o.toString());var i=a.getUTCMinutes();return i.toString().length<2&&(i="0"+i.toString()),o+":"+i;case"yyyy-mm/dd":var n=a.getUTCDate();n.toString().length<2&&(n="0"+n.toString());var r=a.getUTCMonth()+1;return r.toString().length<2&&(r="0"+r.toString()),a.getUTCFullYear()+"-"+r+"/"+n}},e.getCrossLinePoint=function(t,e){var a=t.x1,o=t.y1,i=t.x2,n=t.y2,r=e.x1,s=e.y1,l=e.x2,d=e.y2,h=i-a,m=n-o,c=l-r,p=d-s,f=(-m*(a-r)+h*(o-s))/(-c*m+h*p),u=(+c*(o-s)-p*(a-r))/(-c*m+h*p),g=f>=0&&f<=1&&u>=0&&u<=1;return g?{x:a+u*(i-a),y:o+u*(n-o)}:null},e.clone=function(t){if(null==t)return t;if("object"!=typeof t)return t;var a,o,i="function"==typeof t.pop?[]:{};for(a in t)t.hasOwnProperty(a)&&(o=t[a],"object"==typeof o?o&&"function"==typeof o.getMonth?i[a]=o:i[a]=e.clone(o):i[a]=o);return i},e.slice=function(t,a,o){var i=[];o=o||t.length-1,a>t.length-1&&(a=t.length-1),o<a&&(o=a),o>t.length-1&&o>t.length-1;for(var n=a;n<=o;n++)i.push(e.clone(t[n]));return i},e.getXY=function(t,e,a,o){return[t+Math.cos(o)*a,e+Math.sin(o)*a]}},function(t,e){var a,o,i,n,r,s,l,d=function(){this._events={}};d.prototype.on=function(t,e,a,o){var i;"function"==typeof e&&(o=a,a=e,e=void 0);var n=this._events||(this._events={}),r=n[t]||(n[t]=[]);return r.push([i||a,o,e]),this},d.prototype.off=function(t,e){var a=this._events||(this._events={}),o=a[t]||(a[t]=[]);return a[t]=o.filter(function(t){return void 0!==e&&t[1]!==e}),this},d.prototype.destroy=function(){this._events={}},d.prototype.execute=function(t){for(a=this._events||(this._events={}),o=a[t]||(a[t]=[]),i=Array.prototype.splice.call(arguments,1),s=o.length,r=0;r<s;r++)l=o[r][1]||this,n="undefined"!=typeof o[r][2]?i.concat([o[r][2]]):i,o[r][0].apply(l,n)},d.prototype.trigger=function(t,e){this.execute.apply(this,arguments)},e.EventDriven=d},function(t,e,a){var o=a(3),n=a(4).EventDriven,r=a(6).Interaction,s=a(7).ChartView,l=function(t){this.id=t.id,this.index=t.index,this.app=t.app,this.title=t.title,this.data=t.chartData||[],this.container=t.appendTo,this.isModelRefreshed=!1,this.animationDuration=300,this.longTapDelay=500,this.currentAnimationCancel=null,this.prevState=null,this.interactionExtends=5,this.defaultMinCount=27,this.preZoomModel=null,this.preventTopTimeout=null,this.preventbottomTimeout=null,this.defaultTheme=["light","dark"].indexOf(t.defaultTheme)!==-1?t.defaultTheme:"dark";var e=new Image;e.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 60 60'%3E%3Cpolyline points='18,33.5 25.5,41 42,24' stroke='white' stroke-width='6' stroke-linecap='round' stroke-linejoin='round' fill='none'/%3E%3C/svg%3E";var a=new Image;a.src='data:image/svg+xml,<svg aria-hidden="true" focusable="false" data-icon="angle-right" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 512"><path style="fill: lightgray;" d="M224.3 273l-136 136c-9.4 9.4-24.6 9.4-33.9 0l-22.6-22.6c-9.4-9.4-9.4-24.6 0-33.9l96.4-96.4-96.4-96.4c-9.4-9.4-9.4-24.6 0-33.9L54.3 103c9.4-9.4 24.6-9.4 33.9 0l136 136c9.5 9.4 9.5 24.6.1 34z"></path></svg>';var o=new Image;o.src='data:image/svg+xml,<svg aria-hidden="true" focusable="false" data-icon="search-minus" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="dodgerblue" d="M304 192v32c0 6.6-5.4 12-12 12H124c-6.6 0-12-5.4-12-12v-32c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm201 284.7L476.7 505c-9.4 9.4-24.6 9.4-33.9 0L343 405.3c-4.5-4.5-7-10.6-7-17V372c-35.3 27.6-79.7 44-128 44C93.1 416 0 322.9 0 208S93.1 0 208 0s208 93.1 208 208c0 48.3-16.4 92.7-44 128h16.3c6.4 0 12.5 2.5 17 7l99.7 99.7c9.3 9.4 9.3 24.6 0 34zM344 208c0-75.2-60.8-136-136-136S72 132.8 72 208s60.8 136 136 136 136-60.8 136-136z"></path></svg>',this.checkerImg=e,this.arrowImg=a,this.zoomOutImg=o,this.model={id:this.id,data:this.data,title:this.title,renderStyle:this.defaultTheme,topChanged:!0,bottomChanged:!0,style:{light:{bgColor:"#ffffff",mask:"rgba(255,255,255,0.5)",title:"#222222",zoomOut:"#108be3",tooltipBg:"#ffffff",tooltipShadow:"#e1e4e6",tooltipTitle:"#222222",axisColor:"rgba(24,45,59,0.1)",gridColor:"rgba(24,45,59,0.1)",timeColor:"#8e8e93",gridValuesColor:"rgba(37,37,41,0.5)",crosshairColor:"rgba(24,45,59,0.1)",bottomColor:"rgba(237,245,251,0.65)",caretColor:"#c0d1e1",caretHoleColor:"#fff",labelBorder:"#e6ecf0",labelText:"#fff"},dark:{bgColor:"#242f3e",mask:"rgba(36,47,62,0.5)",title:"#ffffff",zoomOut:"#48aaf0",tooltipBg:"#1c2533",tooltipShadow:"transparent",tooltipTitle:"#ffffff",axisColor:"rgba(255,255,255,0.1)",gridColor:"rgba(255,255,255,0.1)",timeColor:"#87909a",gridValuesColor:"rgba(236,242,248,0.5)",crosshairColor:"rgba(255,255,255,0.1)",bottomColor:"rgba(43,58,77,0.65)",caretColor:"#56626d",caretHoleColor:"#fff",labelBorder:"#344658",labelText:"#fff"}},axisXValues_opacity:1,renderMode:1,draggingMode:!1,startIndex:null,shiftX:0,count:20,gridSpace:24,countShift:1,minCount:27,space:20,lineWidth:3,scale:1,paddingTop:100,paddingBottom:185,paddingLeft:0,paddingRight:0,digits:0,interactionDownX:null,interactionDownY:null,interactionDownStartIndex:null,interactionMoveX:null,interactionMoveY:null,interactionActivated:!1,bottomChart:{top:0,left:0,height:54,width:0,lineWidth:1,paddingLeft:24,paddingRight:24,caret:{left:{x:0,y:0,w:0,h:0},right:{x:0,y:0,w:0,h:0},frame:{x:0,y:0,w:0,h:0,left:{x:0,y:0,w:0,h:0},right:{x:0,y:0,w:0,h:0}}}},labels:[],point:null,crosshair:null,animatePoint:null,theme:{}},"chart3"!==this.id&&"chart5"!==this.id||(this.model.paddingBottom+=165,this.model.data.stacked=!1),"chart4"===this.id&&(this.model.data.stacked=!0,this.model.paddingBottom+=55),this.view=new s({app:this.app,parent:this,className:"chart "+this.id,extraClassName:this.model.renderStyle,appendTo:this.container}),this.interaction=new r({app:this.app,view:this.view}),this.bindEvents()};o.extend(l,n),l.prototype.bindEvents=function(){this.app.on("resize",this.onViewResize,this),this.view.on("ready",this.onViewReady,this)},l.prototype.onViewReady=function(){this.model.startIndex=this.model.data.lines.x.length-this.model.count,this.interactionActivated||(this.model.interactionActivated=!0,this.bindInteractionEvents(),this.interaction.activate()),this.onViewResize()},l.prototype.onViewResize=function(){this.data&&(this.view.resize(),this.refreshModel(),this.correctPosition(),this.refreshModel(!0))},l.prototype.bindInteractionEvents=function(){this.interaction.on("down",this.onInteractionDown,this),this.interaction.on("move",this.onInteractionMove,this),this.interaction.on("up",this.onInteractionUp,this)},l.prototype.unBindInteractionEvents=function(){this.interaction.off("down",this),this.interaction.off("move",this),this.interaction.off("up",this)},l.prototype.getXFromEvent=function(t){return t.targetTouches?t.targetTouches.length?t.targetTouches[0].pageX-this.view.left:t.changedTouches.length?t.changedTouches[0].pageX-this.view.left:void 0:(t.pageX||0)-this.view.left},l.prototype.getYFromEvent=function(t){return t.targetTouches?t.targetTouches.length?t.targetTouches[0].pageY-this.view.top:t.changedTouches.length?t.changedTouches[0].pageY-this.view.top:void 0:(t.pageY||0)-this.view.top},l.prototype.arcOut=function(){var t=this,e={w:t.model.height,h:t.model.height,r:t.model.height/2},a={w:t.model.width,h:t.model.height,r:0};t.model.animateCircle={current:o.clone(e),from:e,to:a},t.model.arcInState=null,t.model.pointX=null,t.model.arc=null,t.model.onlyRender=!0,this.preventRenderTopFromCache(),this.preventRenderBottomFromCache(),this.animateTransition({animateCircleFrom:this.model.animateCircle},{animateCircleTo:this.model.animateCircle},function(){t.model.arcInState=null,t.model.animateCircle=null,t.model.onlyRender=!0;var e=t.model.renderStyle,a=o.clone(t.model.data.actives);t.model=o.clone(t.preZoomModel),t.model.renderStyle=e,a&&(t.model.data.actives=a),t.preZoomModel=null,t.model.axisXFormatAsTime=!1,t.model.arc=!1,t.model.animateCircle=null,t.refreshModel(!0,null,null,function(){t.model.onlyRender=!1})})},l.prototype.arcIn=function(){var t=this;this.preZoomModel=o.clone(this.model),this.model.axisXFormatAsTime=!0;var e={w:this.model.width,h:this.model.height,r:0},a={w:e.h,h:e.h,r:e.h/2};this.model.animateCircle={current:o.clone(e),from:e,to:a},this.model.pointX=null,this.model.arc=null,this.preventRenderTopFromCache(),this.preventRenderBottomFromCache(),this.animateTransition({animateCircleFrom:this.model.animateCircle},{animateCircleTo:this.model.animateCircle},function(){t.model.animateCircle=null,t.model.onlyRender=!0,t.model.arcInState={w:a.w,h:a.h,r:a.r},t.refreshModel(!0,null,null,function(){t.model.onlyRender=!1;var e=t.preZoomModel.point.index,a=t.model.data.lines,o=Object.keys(a),i=e-3,n=e+4;for(var r in o){var s=o[r];t.model.data.lines[s]=a[s].slice(i,n)}t.model.startIndex=3,t.model.count=1,t.model.minCount=1,t.model.axisXFormatAsTime=!0,t.model.pointX=null,t.model.arc=!0,t.refreshModel(!0,null,null,function(){})})})},l.prototype.zoomOut=function(){if(this.model.data.percentage)return this.arcOut();if(this.preZoomModel){var t=o.clone(this.preZoomModel);this.model.pointX=null;var e,a,n,r,s,l,d,h,m,c,p,f=this;s=Object.keys(f.model.data.draw);var u={};for(d in s)if(l=s[d],f.model.data.draw[l]&&f.model.data.draw[l].length){for(e=f.model.data.draw[l][2][0]-f.model.data.draw[l][1][0],f.model.data.stacked&&(a=f.model.data.draw[l][2][2]-f.model.data.draw[l][1][2]),r=f.model.data.draw[l].length,t.data.draw[l]||(t.data.draw[l]=o.clone(t.data.draw.y0)),m=o.slice(t.data.draw[l],0,t.point.ii),c=o.slice(t.data.draw[l],t.point.ii+1),p=m.concat(f.model.data.draw[l]).concat(c),h=f.model.data.draw[l][r-1][0],f.model.data.stacked&&(n=f.model.data.draw[l][r-1][2]),i=t.point.ii+r;i<p.length;i++)p[i]&&(p[i][0]=h+e,h+=e,f.model.data.stacked&&(p[i][2]=n+a,n+=a));for(h=f.model.data.draw[l][0][0],f.model.data.stacked&&(n=f.model.data.draw[l][0][2]),i=t.point.ii;i>=0;i--)p[i]&&(p[i][0]=h-e,h-=e,f.model.data.stacked&&(p[i][2]=n-a,n-=a));u[l]=p}s=Object.keys(t.data.draw);var g={};for(d in s)l=s[d],f.model.data.draw[l]&&f.model.data.draw[l].length&&(r=f.model.data.draw[l].length,m=o.slice(t.data.draw[l],0,t.point.ii),c=o.slice(t.data.draw[l],t.point.ii+1),p=m.concat(f.model.data.draw[l]).concat(c),p=p.map(function(e,a){return a>=m.length&&a<m.length+r?t.data.draw[l][t.point.ii]:e}),g[l]=p);s=Object.keys(t.data.bottomDraw);var w={};for(d in s)if(l=s[d],f.model.data.bottomDraw[l]&&f.model.data.bottomDraw[l].length){for(e=f.model.data.bottomDraw[l][2][0]-f.model.data.bottomDraw[l][1][0],f.model.data.stacked&&(a=f.model.data.draw[l][2][2]-f.model.data.draw[l][1][2]),r=f.model.data.bottomDraw[l].length,m=o.slice(t.data.bottomDraw[l],0,t.point.bottomii),c=o.slice(t.data.bottomDraw[l],t.point.bottomii+1),p=m.concat(f.model.data.bottomDraw[l]).concat(c),h=f.model.data.bottomDraw[l][r-1][0],f.model.data.stacked&&(n=f.model.data.bottomDraw[l][r-1][2]),i=t.point.bottomii+r;i<p.length;i++)p[i]&&(p[i][0]=h+e,h+=e,f.model.data.stacked&&(p[i][2]=n+a,n+=a));for(h=f.model.data.bottomDraw[l][0][0],f.model.data.stacked&&(n=f.model.data.bottomDraw[l][0][2]),i=t.point.bottomii;i>=0;i--)p[i]&&(p[i][0]=h-e,h-=e,f.model.data.stacked&&(p[i][2]=n-a,n-=a));w[l]=p}s=Object.keys(t.data.bottomDraw);var v={};for(d in s)l=s[d],f.model.data.bottomDraw[l]&&f.model.data.bottomDraw[l].length&&(r=f.model.data.bottomDraw[l].length,m=o.slice(t.data.bottomDraw[l],0,t.point.bottomii),c=o.slice(t.data.bottomDraw[l],t.point.bottomii+1),p=m.concat(f.model.data.bottomDraw[l]).concat(c),p=p.map(function(e,a){return a>=m.length&&a<m.length+r?t.data.bottomDraw[l][t.point.bottomii]:e}),v[l]=p);var y=t.point.caret,x=f.model.bottomChart.caret;f.model.animateDraw={current:o.clone(u),from:u,to:g,bottomCurrent:o.clone(w),bottomFrom:w,bottomTo:v,caretCurrent:o.clone(x),caretFrom:x,caretTo:y},f.animationInprogress=!0,f.model.zoomInProgress=!0,f.model.topChanged=!0,f.model.bottomChanged=!0,f.preventRenderTopFromCache(),f.preventRenderBottomFromCache(),f.animateTransition({animateDrawFrom:f.model.animateDraw},{animateDrawTo:f.model.animateDraw},function(){f.model.animateDraw=null,f.animationInprogress=!1;var t=f.model.renderStyle,e=o.clone(f.model.data.actives);f.model.barToLines&&(e=null),f.model=o.clone(f.preZoomModel),f.model.renderStyle=t,e&&(f.model.data.actives=e),f.preZoomModel=null,f.model.barToLines=null,f.model.onlyRender=!0,f.refreshModel(!0,null,null,function(){f.model.onlyRender=!1})})}},l.prototype.zoomIn=function(){var t=this;if(this.model.data.percentage)return this.arcIn();this.preZoomModel=o.clone(this.model);var e=this.model.point.index,a=this.model.data.lines.x[e],n=o.formatDate("yyyy-mm/dd",this.model.data.lines.x[e]),r=null;this.animationInprogress=!0,this.app.fetchRemoteData("/data/"+this.index+"/"+n+".json",0,function(e,n){if(r=e){var s=r.lines,l=Object.keys(s);for(var d in l){var h=l[d];t.model.data.lines[h]=s[h]}t.model.startIndex=t.model.data.lines.x.indexOf(a)-1,t.model.count=27,t.model.minCount=27,t.model.axisXFormatAsTime=!0,Object.keys(t.model.data.lines).length>Object.keys(t.preZoomModel.data.lines).length&&(t.model.data=r,t.model.startIndex=0,t.model.count=t.model.data.lines.x.length-1,t.model.minCount=t.model.data.lines.x.length-1,t.model.data.stacked=!1,t.model.barToLines=!0),t.model.zoomInProgress=!0,t.model.pointX=null,t.model.onlyCalculate=!0,t.refreshModel(!0,null,null,function(){t.model.onlyCalculate=!1;var e,a,n,r,s,l,d,h,m,c=o.clone(t.preZoomModel);if(t.model.barToLines){n=Object.keys(t.model.data.draw);var p={};for(s in n)r=n[s],c.data.draw[r]||(c.data.draw[r]=o.clone(c.data.draw.y0)),a=t.model.data.draw[r].length,d=o.slice(c.data.draw[r],0,c.point.ii),h=o.slice(c.data.draw[r],c.point.ii+1),m=d.concat(t.model.data.draw[r]).concat(h),m=m.map(function(t,e){return e>=d.length&&e<d.length+a?c.data.draw[r][c.point.ii]:t}),p[r]=m;n=Object.keys(c.data.draw);var f,u,g={};for(s in n)if(r=n[s],t.model.data.draw[r]&&t.model.data.draw[r].length){for(e=t.model.data.draw[r][2][0]-t.model.data.draw[r][1][0],t.model.data.stacked&&(f=t.model.data.draw[r][2][2]-t.model.data.draw[r][1][2]),a=t.model.data.draw[r].length,d=o.slice(c.data.draw[r],0,c.point.ii),h=o.slice(c.data.draw[r],c.point.ii+1),m=d.concat(t.model.data.draw[r]).concat(h),l=t.model.data.draw[r][a-1][0],t.model.data.stacked&&(u=t.model.data.draw[r][a-1][2]),i=c.point.ii+a;i<m.length;i++)m[i]&&(m[i][0]=l+e,l+=e,t.model.data.stacked&&(m[i][2]=u+f,u+=f));for(l=t.model.data.draw[r][0][0],t.model.data.stacked&&(u=t.model.data.draw[r][0][2]),i=c.point.ii;i>=0;i--)m[i]&&(m[i][0]=l-e,l-=e,t.model.data.stacked&&(m[i][2]=u-f,u-=f));g[r]=m}}else{n=Object.keys(c.data.draw);var p={};for(s in n)r=n[s],t.model.data.draw[r]&&t.model.data.draw[r].length&&(a=t.model.data.draw[r].length,d=o.slice(c.data.draw[r],0,c.point.ii),h=o.slice(c.data.draw[r],c.point.ii+1),m=d.concat(t.model.data.draw[r]).concat(h),m=m.map(function(t,e){return e>=d.length&&e<d.length+a?c.data.draw[r][c.point.ii]:t}),p[r]=m);n=Object.keys(c.data.draw);var f,u,g={};for(s in n)if(r=n[s],t.model.data.draw[r]&&t.model.data.draw[r].length){for(e=t.model.data.draw[r][2][0]-t.model.data.draw[r][1][0],t.model.data.stacked&&(f=t.model.data.draw[r][2][2]-t.model.data.draw[r][1][2]),a=t.model.data.draw[r].length,d=o.slice(c.data.draw[r],0,c.point.ii),h=o.slice(c.data.draw[r],c.point.ii+1),m=d.concat(t.model.data.draw[r]).concat(h),l=t.model.data.draw[r][a-1][0],t.model.data.stacked&&(u=t.model.data.draw[r][a-1][2]),i=c.point.ii+a;i<m.length;i++)m[i]&&(m[i][0]=l+e,l+=e,t.model.data.stacked&&(m[i][2]=u+f,u+=f));for(l=t.model.data.draw[r][0][0],t.model.data.stacked&&(u=t.model.data.draw[r][0][2]),i=c.point.ii;i>=0;i--)m[i]&&(m[i][0]=l-e,l-=e,t.model.data.stacked&&(m[i][2]=u-f,u-=f));g[r]=m}}n=Object.keys(c.data.bottomDraw);var w={};for(s in n)r=n[s],t.model.data.bottomDraw[r]&&t.model.data.bottomDraw[r].length&&(a=t.model.data.bottomDraw[r].length,d=o.slice(c.data.bottomDraw[r],0,c.point.bottomii),h=o.slice(c.data.bottomDraw[r],c.point.bottomii+1),m=d.concat(t.model.data.bottomDraw[r]).concat(h),m=m.map(function(t,e){return e>=d.length&&e<d.length+a?c.data.bottomDraw[r][c.point.bottomii]:t}),w[r]=m);n=Object.keys(c.data.bottomDraw);var v={};for(s in n)if(r=n[s],t.model.data.bottomDraw[r]&&t.model.data.bottomDraw[r].length){for(e=t.model.data.bottomDraw[r][2][0]-t.model.data.bottomDraw[r][1][0],t.model.data.stacked&&(f=t.model.data.bottomDraw[r][2][2]-t.model.data.bottomDraw[r][1][2]),a=t.model.data.bottomDraw[r].length,d=o.slice(c.data.bottomDraw[r],0,c.point.bottomii),h=o.slice(c.data.bottomDraw[r],c.point.bottomii+1),m=d.concat(t.model.data.bottomDraw[r]).concat(h),l=t.model.data.bottomDraw[r][a-1][0],t.model.data.stacked&&(u=t.model.data.bottomDraw[r][a-1][2]),i=c.point.bottomii+a;i<m.length;i++)m[i]&&(m[i][0]=l+e,l+=e,t.model.data.stacked&&(m[i][2]=u+f,u+=f));for(l=t.model.data.bottomDraw[r][0][0],t.model.data.stacked&&(u=t.model.data.bottomDraw[r][0][2]),i=c.point.bottomii;i>=0;i--)m[i]&&(m[i][0]=l-e,l-=e,t.model.data.stacked&&(m[i][2]=u-f,u-=f));v[r]=m}var y=c.point.caret,x=t.model.bottomChart.caret;t.model.animateDraw={current:o.clone(p),from:p,to:g,bottomCurrent:o.clone(w),bottomFrom:w,bottomTo:v,caretCurrent:o.clone(y),caretFrom:y,caretTo:x},t.preventRenderTopFromCache(),t.preventRenderBottomFromCache(),t.animateTransition({animateDrawFrom:t.model.animateDraw},{animateDrawTo:t.model.animateDraw},function(){t.model.animateDraw=null,t.model.onlyRender=!0,t.animationInprogress=!1,t.refreshModel(!0,null,null,function(){t.model.onlyRender=!1,t.a=0})})})}})},l.prototype.onInteractionDown=function(t){this.interactionPart=null;var e=this.getXFromEvent(t),a=this.getYFromEvent(t),i={l:this.model.gridSpace,t:this.model.paddingTop-30-30,w:130,h:30};if(o.isPointInBox({x:e,y:a},i)&&this.model.axisXFormatAsTime)return void this.zoomOut();if(this.model.data.hover)for(var n in this.model.data.hover){var r=this.model.data.hover[n],s={l:r.x-30,t:r.y-30,w:60,h:60};if(o.isPointInBox({x:e,y:a},s))return void this.showSegmentLabel(r)}this.model.drawSegmentLabel=null;
var l={l:this.model.left,t:this.model.top,w:this.model.width,h:this.model.height};if(o.isPointInBox({x:e,y:a},l)){if(this.model.point){var d={l:this.model.point.x,t:this.model.point.y,w:this.model.point.w,h:this.model.point.h};if(o.isPointInBox({x:e,y:a},d)&&this.model.point.canZoom&&!this.model.axisXFormatAsTime)return void this.zoomIn();if(Math.abs(this.model.point.xx-e)>=this.model.space/2){var h=this.view.getNearestPointByX(e,this.model),m=h.x;return this.model.point.way=m>this.model.point.xx,this.model.point.dist=0,this.model.animatePoint={from:{x:this.model.point.xx},to:{x:m}},void this.animateTransition({animatePointFrom:this.model.animatePoint.from},{animatePointTo:this.model.animatePoint.to})}}this.model.animatePoint=null,this.interactionPart="topChart",this.model.interactionDownX=this.getXFromEvent(t)-this.model.shiftX,this.model.interactionDownY=this.getYFromEvent(t);var c=this.model.data.lines.x.length-this.model.count;return this.model.interactionDownStartIndex=this.model.startIndex||c,null==this.model.startIndex?this.model.interactionDownStartIndex=c:this.model.interactionDownStartIndex=this.model.startIndex,this.model.pointX=this.getXFromEvent(t)-this.model.shiftX,void(this.model.pointY=this.getYFromEvent(t))}for(var n in this.model.labels){var r=this.model.labels[n],s={l:r.x,t:r.y,w:r.w,h:r.h};if(o.isPointInBox({x:e,y:a},s)){var p=this;this.interactionPart=r.id,this.labelLongTapTimeout&&clearTimeout(this.labelLongTapTimeout),this.labelLongTapTimeout=setTimeout(function(){p.interactionLongTap=!0,p.hideAllLinesInsteadGivenId(p.interactionPart)},this.longTapDelay);break}}if(!this.model.barToLines){var f={l:this.model.bottomChart.caret.frame.left.x-this.interactionExtends,t:this.model.bottomChart.caret.frame.left.y-this.interactionExtends,w:this.model.bottomChart.caret.frame.left.w+2*this.interactionExtends,h:this.model.bottomChart.caret.frame.left.h+2*this.interactionExtends};if(o.isPointInBox({x:e,y:a},f))return this.interactionPart="caretFrameLeft",this.model.interactionDownX=this.getXFromEvent(t)+this.model.shiftX*this.model.bottomChart.space/this.model.space,this.model.interactionDownY=this.getYFromEvent(t),this.model.interactionDownStartIndex=this.model.startIndex,this.model.interactionDownStartCount=this.model.count,this.model.pointX=null,void(this.model.pointY=null);var u={l:this.model.bottomChart.caret.frame.right.x-this.interactionExtends,t:this.model.bottomChart.caret.frame.right.y-this.interactionExtends,w:this.model.bottomChart.caret.frame.right.w+2*this.interactionExtends,h:this.model.bottomChart.caret.frame.right.h+2*this.interactionExtends};if(o.isPointInBox({x:e,y:a},u))return this.interactionPart="caretFrameRight",this.model.interactionDownX=this.getXFromEvent(t)+this.model.shiftX*this.model.bottomChart.space/this.model.space,this.model.interactionDownY=this.getYFromEvent(t),this.model.interactionDownStartIndex=this.model.startIndex,this.model.interactionDownStartCount=this.model.count,this.model.pointX=null,void(this.model.pointY=null);var g={l:this.model.bottomChart.caret.frame.x-this.interactionExtends,t:this.model.bottomChart.caret.frame.y-this.interactionExtends,w:this.model.bottomChart.caret.frame.w+2*this.interactionExtends,h:this.model.bottomChart.caret.frame.h+2*this.interactionExtends};if(o.isPointInBox({x:e,y:a},g))return this.interactionPart="caretFrame",this.model.interactionDownX=this.getXFromEvent(t)+this.model.shiftX*this.model.bottomChart.space/this.model.space,this.model.interactionDownY=this.getYFromEvent(t),this.model.interactionDownStartIndex=this.model.startIndex,this.model.pointX=null,void(this.model.pointY=null);var w,v={l:this.model.bottomChart.caret.left.x-this.interactionExtends,t:this.model.bottomChart.caret.left.y-this.interactionExtends,w:this.model.bottomChart.caret.left.w+2*this.interactionExtends,h:this.model.bottomChart.caret.left.h+2*this.interactionExtends};if(o.isPointInBox({x:e,y:a},v)&&!this.model.axisXFormatAsTime)return this.interactionPart="caretLeft",this.model.interactionDownX=this.getXFromEvent(t)+this.model.shiftX*this.model.bottomChart.space/this.model.space,w=(this.model.interactionDownX-this.model.bottomChart.paddingLeft)/this.model.bottomChart.space,this.model.count=this.model.minCount,this.model.startIndex=Math.floor(w-this.model.count/2),this.correctPosition(),this.preventRenderTopFromCache(),this.model.pointX=null,void(this.model.pointY=null);var y={l:this.model.bottomChart.caret.right.x-this.interactionExtends,t:this.model.bottomChart.caret.right.y-this.interactionExtends,w:this.model.bottomChart.caret.right.w+2*this.interactionExtends,h:this.model.bottomChart.caret.right.h+2*this.interactionExtends};return o.isPointInBox({x:e,y:a},y)&&!this.model.axisXFormatAsTime?(this.interactionPart="caretRight",this.model.interactionDownX=this.getXFromEvent(t)+this.model.shiftX*this.model.bottomChart.space/this.model.space,w=(this.model.interactionDownX-this.model.bottomChart.paddingLeft)/this.model.bottomChart.space,this.model.count=this.model.minCount,this.model.startIndex=Math.floor(w-this.model.count/2),this.correctPosition(),this.preventRenderTopFromCache(),this.model.pointX=null,void(this.model.pointY=null)):void 0}},l.prototype.showSegmentLabel=function(t){if(t&&this.model.data.hover){var e=t.line;this.model.drawSegmentLabel={x:t.x,y:t.y,color:this.model.data.colors[e],name:this.model.data.names[e],value:this.model.data.lines[e][t.i]}}},l.prototype.hideAllLinesInsteadGivenId=function(t){this.labelLongTapTimeout&&clearTimeout(this.labelLongTapTimeout);var e=this,a=[];return this.data.keys.map(function(o){o!==t&&e.data.actives[o]&&a.push(o)}),this.model.animateHideShowLines={progress:{},now:{},to:{}},a.length&&a.map(function(t){e.model.animateHideShowLines.now[t]=1,e.model.animateHideShowLines.to[t]=0,e.model.data.actives[t]=!1}),this.data.actives[t]||(this.model.animateHideShowLines.now[t]=0,this.model.animateHideShowLines.to[t]=1),this.model.data.actives[t]=!0,this.model.arc?(this.model.animateHideShowLines=null,void this.refreshModel(!0)):(this.preventRenderTopFromCache(),this.preventRenderBottomFromCache(),void this.refreshModel(!0,{animateHideShowLinesFrom:this.model.animateHideShowLines.now},{animateHideShowLinesTo:this.model.animateHideShowLines.to}))},l.prototype.animateCaret=function(t,e,a,o){var i=this;this.model.animateCaret={from:[t,a],to:[e,o]},this.animationInprogress=!0,this.preventRenderTopFromCache(),this.refreshModel(!1,{animateCaretFrom:this.model.animateCaret.from},{animateCaretTo:this.model.animateCaret.to},function(){i.animationInprogress=!1,requestAnimationFrame(function(){i.refreshModel()})})},l.prototype.onInteractionMove=function(t){this.labelLongTapTimeout&&clearTimeout(this.labelLongTapTimeout),this.interactionLongTap=!1,this.animationInprogress||requestAnimationFrame(function(){var e,a;if(this.model.interactionMoveX=this.getXFromEvent(t),this.model.interactionMoveY=this.getYFromEvent(t),"caretFrame"===this.interactionPart&&null!=this.model.interactionDownX&&null!=this.model.interactionDownY&&null!=this.model.interactionDownStartIndex)if(this.model.axisXFormatAsTime){var o=24;this.model.data.percentage&&(o=1),this.model.interactionMoveX>this.model.bottomChart.caret.frame.x+this.model.bottomChart.caret.frame.w?this.animateCaret(this.model.startIndex,this.model.startIndex+o,this.model.count,this.model.count):this.model.interactionMoveX<this.model.bottomChart.caret.frame.x&&this.animateCaret(this.model.startIndex,this.model.startIndex-o,this.model.count,this.model.count)}else e=this.model.interactionMoveX-this.model.interactionDownX,a=e>=0?Math.floor(e/this.model.bottomChart.space):Math.ceil(e/this.model.bottomChart.space),this.model.startIndex=this.model.interactionDownStartIndex+a,this.model.shiftX=(-e+Math.floor(a*this.model.bottomChart.space))*this.model.space/this.model.bottomChart.space,this.correctPosition(),this.preventRenderTopFromCache();if("caretFrameLeft"===this.interactionPart&&null!=this.model.interactionDownX&&null!=this.model.interactionDownY&&null!=this.model.interactionDownStartIndex&&null!=this.model.interactionDownStartCount)if(this.model.axisXFormatAsTime){var i=Math.floor(27*this.model.bottomChart.space)/2,o=24,n=27;this.model.data.percentage&&(o=1,i=Math.floor(1*this.model.bottomChart.space)/2,n=1),this.model.interactionMoveX>this.model.bottomChart.caret.frame.x+i?this.model.count>n&&this.animateCaret(this.model.startIndex,this.model.startIndex+o,this.model.count,this.model.count-o):this.model.interactionMoveX<this.model.bottomChart.caret.frame.x-i&&this.animateCaret(this.model.startIndex,this.model.startIndex-o,this.model.count,this.model.count+o)}else e=this.model.interactionMoveX-this.model.interactionDownX,a=e>=0?Math.floor(e/this.model.bottomChart.space):Math.ceil(e/this.model.bottomChart.space),this.model.interactionDownStartIndex+a<0?(this.model.startIndex=0,this.model.shiftX=0):this.model.interactionDownStartCount-e/this.model.bottomChart.space>this.model.minCount&&(this.model.startIndex=this.model.interactionDownStartIndex+a,this.model.shiftX=(-e+a*this.model.bottomChart.space)*this.model.space/this.model.bottomChart.space,a=e/this.model.bottomChart.space,this.model.count=this.model.interactionDownStartCount-a),this.correctPosition(),this.preventRenderTopFromCache();if("caretFrameRight"===this.interactionPart&&null!=this.model.interactionDownX&&null!=this.model.interactionDownY&&null!=this.model.interactionDownStartIndex&&null!=this.model.interactionDownStartCount)if(this.model.axisXFormatAsTime){var i=Math.floor(27*this.model.bottomChart.space)/2,n=27,o=24;if(this.model.data.percentage){o=1;var n=1;i=Math.floor(1*this.model.bottomChart.space)/2}this.model.interactionMoveX>=this.model.bottomChart.caret.frame.x+this.model.bottomChart.caret.frame.w+i?this.animateCaret(this.model.startIndex,this.model.startIndex,this.model.count,this.model.count+o):this.model.interactionMoveX<=this.model.bottomChart.caret.frame.x+this.model.bottomChart.caret.frame.w-i&&this.model.count>n&&this.animateCaret(this.model.startIndex,this.model.startIndex,this.model.count,this.model.count-o)}else e=this.model.interactionMoveX-this.model.interactionDownX,a=e/this.model.bottomChart.space,this.model.count=this.model.interactionDownStartCount+a,this.model.interactionDownStartIndex+this.model.count>=this.model.data.lines.x.length&&(this.model.count=this.model.data.lines.x.length-this.model.interactionDownStartIndex),this.correctPosition(),this.preventRenderTopFromCache();this.refreshModel()}.bind(this))},l.prototype.correctPosition=function(){this.model.count<this.model.minCount&&(this.model.count=this.model.minCount),this.model.count>this.model.data.lines.x.length&&(this.model.count=this.model.data.lines.x.length-1);var t=this.model.data.lines.x.length-this.model.count;t<0&&(t=0),this.model.startIndex>t+1?(this.model.startIndex=Math.floor(t),this.model.count=Math.floor(this.model.count),this.model.shiftX=0):this.model.startIndex<0&&(this.model.startIndex=0,this.model.count=Math.floor(this.model.count),this.model.shiftX=0)},l.prototype.onInteractionUp=function(t){if(this.labelLongTapTimeout&&clearTimeout(this.labelLongTapTimeout),this.animationInprogress)return this.interactionPart=null,void(this.interactionLongTap=!1);if(this.model.paddingRight=0,this.model.draggingMode=!1,o.toggleClass(this.view.canvas,"grabbing",!1),"touch"!=this.app.device?(this.model.interactionMoveX=this.getXFromEvent(t),this.model.interactionMoveY=this.getYFromEvent(t)):(this.model.interactionMoveX=this.getXFromEvent(t),this.model.interactionMoveY=this.getYFromEvent(t)),!this.interactionLongTap){var e=this.getXFromEvent(t),a=this.getYFromEvent(t);for(var i in this.model.labels){var n=this.model.labels[i],r={l:n.x,t:n.y,w:n.w,h:n.h},s=this.model.data.actives[n.id],l=0,d=Object.keys(this.model.data.actives);for(var i in d){var h=d[i];"x"!=h&&this.model.data.actives[h]&&(l+=1)}var m=!1;if(s||(m=!0),s&&l>1&&(m=!0),o.isPointInBox({x:e,y:a},r)&&this.interactionPart===n.id&&m)return this.model.animateHideShowLines={progress:{},now:{},to:{}},this.model.animateHideShowLines.now[n.id]=this.model.data.actives[n.id]?1:0,this.model.animateHideShowLines.to[n.id]=this.model.data.actives[n.id]?0:1,this.model.data.actives[n.id]=!this.model.data.actives[n.id],this.model.arc?(this.model.animateHideShowLines=null,void this.refreshModel(!0)):(this.preventRenderTopFromCache(),this.preventRenderBottomFromCache(),this.interactionPart=null,this.interactionLongTap=null,void this.refreshModel(!0,{animateHideShowLinesFrom:this.model.animateHideShowLines.now},{animateHideShowLinesTo:this.model.animateHideShowLines.to}))}}this.interactionPart=null,this.interactionLongTap=null,requestAnimationFrame(function(){this.refreshModel()}.bind(this))},l.prototype.preventRenderTopFromCache=function(){var t=this;this.preventTopTimeout&&clearTimeout(this.preventTopTimeout),this.preventTop=!0,this.preventTopTimeout=setTimeout(function(){t.preventTop=!1},this.animationDuration+100)},l.prototype.preventRenderBottomFromCache=function(){var t=this;this.preventBottomTimeout&&clearTimeout(this.preventBottomTimeout),this.preventBottom=!0,this.preventBottomTimeout=setTimeout(function(){t.preventBottom=!1},this.animationDuration+100)},l.prototype.refreshModel=function(t,e,a,i){if(!this.model.animatePoint){this.correctPosition();var n,r,s,l,d=this.model.data.lines.x.length,h=Math.min(this.model.count,d);this.model.max=-(1/0),this.model.min=1/0,this.model.data.stacked&&(this.model.min=0),this.model.data.percentage&&(this.model.min=0,this.model.max=100),this.model.data.stackes||(this.model.data.stackes={}),this.model.data.percentages||(this.model.data.percentages={}),this.model.data.per||(this.model.data.per={});var m=this.model.startIndex-1;m<0&&(m=0);var c=this.model.startIndex+h+2;for(c>=this.model.data.lines.x.length&&(c=this.model.data.lines.x.length-1),this.model.data.percentage&&(m=0,c=this.model.data.lines.x.length-1),r=m;r<=c;r++)if(this.model.data.percentage){var p=0;for(s=0;s<this.model.data.keys.length;s++)n=this.model.data.keys[s],l=this.model.data.actives[n],l&&null!==this.model.data.lines[n][r]&&(p+=this.model.data.lines[n][r]);var f=0;for(s=0;s<this.model.data.keys.length;s++){if(n=this.model.data.keys[s],l=this.model.data.actives[n],this.model.data.percentages[n]||(this.model.data.percentages[n]=[]),this.model.data.per[n]||(this.model.data.per[n]=[]),l){if(null===this.model.data.lines[n][r]){this.model.data.percentages[n][r]=null,this.model.data.per[n][r]=0;continue}this.model.data.per[n][r]=100*this.model.data.lines[n][r]/p,f+=this.model.data.per[n][r]}else this.model.data.per[n][r]=0;f>99.6&&(pers=100),this.model.data.percentages[n][r]=f}}else if(this.model.data.stacked){var p=0;for(s=0;s<(this.model.data.y_scaled?1:this.model.data.keys.length);s++)n=this.model.data.keys[s],l=this.model.data.actives[n],this.model.data.stackes[n]||(this.model.data.stackes[n]=[]),l&&null!==this.model.data.lines[n][r]&&(p+=this.model.data.lines[n][r]),this.model.data.stackes[n][r]=p;p<this.model.min&&(this.model.min=p),p>this.model.max&&(this.model.max=p)}else for(s=0;s<(this.model.data.y_scaled?1:this.model.data.keys.length);s++)n=this.model.data.keys[s],l=this.model.data.actives[n],l&&null!==this.model.data.lines[n][r]&&(this.model.data.lines[n][r]<this.model.min&&(this.model.min=this.model.data.lines[n][r]),this.model.data.lines[n][r]>this.model.max&&(this.model.max=this.model.data.lines[n][r]));this.model.max===-(1/0)&&(this.model.max=1),this.model.min===1/0&&(this.model.min=0),this.model.left=this.model.paddingLeft,this.model.top=this.model.paddingTop,this.model.width=this.view.canvas.width-this.model.paddingLeft-this.model.paddingRight,this.model.height=this.view.canvas.height-this.model.paddingTop-this.model.paddingBottom,this.model.space=this.model.width/this.model.count,this.model.scale=(this.model.max-this.model.min)/this.model.height;var u=d-1,g=Math.ceil(70/this.model.space),w=Math.pow(2,Math.ceil(Math.log2(g))),v=this.model.axisXValues_divider;for(v&&this.model.axisXValues&&this.model.axisXValues.length&&(v<w?(this.prevState&&(this.prevState.axisXhideOpacity=1),this.model.axisXValues_hide=[].concat(this.model.axisXValues),this.model.axisXValues_opacity=0):v>w&&(this.prevState&&(this.prevState.axisXhideOpacity=0),this.model.axisXValues_hide=[].concat(this.model.axisXValues),this.model.axisXValues_opacity=1)),this.model.axisXValues_divider=w,this.model.axisXValues=[],r=d-1;r>0;r--)(u-r)%w===0&&(this.model.axisXValues.push(r),u=r);w=2;var y=this.model.max.toString().length;2===y?w=5:y>=3&&(w=Math.pow(10,y-2));var x=[],b=this.model.min,C=this.view.getYByValue(b,this.model);for(this.model.axisYValues=[b],b=Math.floor(b/w)*w,r=b;r<=2*this.model.max;r+=w)if(r%w===0){var T=this.view.getYByValue(r,this.model);C-T>=60&&(this.model.axisYValues.push(r),x.push(T),C=T)}for(null==this.model.bottomChart.startIndex&&(this.model.bottomChart.startIndex=0),null==this.model.bottomChart.shiftX&&(this.model.bottomChart.shiftX=0),this.model.bottomChart.max=-(1/0),this.model.bottomChart.min=1/0,this.model.data.stacked&&(this.model.bottomChart.min=0),this.model.data.percentage&&(this.model.bottomChart.min=0,this.model.bottomChart.max=100),this.model.data.bottomStackes||(this.model.data.bottomStackes={}),this.model.data.bottomPercentages||(this.model.data.bottomPercentages={}),r=0;r<d;r++)if(this.model.data.percentage){var p=0;for(s=0;s<this.model.data.keys.length;s++)n=this.model.data.keys[s],l=this.model.data.actives[n],l&&null!==this.model.data.lines[n][r]&&(p+=this.model.data.lines[n][r]);var f=0;for(s=0;s<this.model.data.keys.length;s++){if(n=this.model.data.keys[s],l=this.model.data.actives[n],this.model.data.bottomPercentages[n]||(this.model.data.bottomPercentages[n]=[]),l){if(null===this.model.data.lines[n][r]){this.model.data.bottomPercentages[n][r]=null;continue}f+=100*this.model.data.lines[n][r]/p}this.model.data.bottomPercentages[n][r]=f>100?100:f}}else if(this.model.data.stacked){var p=0;for(s=0;s<(this.model.data.y_scaled?1:this.model.data.keys.length);s++)n=this.model.data.keys[s],l=this.model.data.actives[n],this.model.data.bottomStackes[n]||(this.model.data.bottomStackes[n]=[]),l&&null!==this.model.data.lines[n][r]&&(p+=this.model.data.lines[n][r]),this.model.data.bottomStackes[n][r]=p;p<this.model.bottomChart.min&&(this.model.bottomChart.min=p),p>this.model.bottomChart.max&&(this.model.bottomChart.max=p)}else for(s=0;s<(this.model.data.y_scaled?1:this.model.data.keys.length);s++)n=this.model.data.keys[s],l=this.model.data.actives[n],l&&null!==this.model.data.lines[n][r]&&(this.model.data.lines[n][r]<this.model.bottomChart.min&&(this.model.bottomChart.min=this.model.data.lines[n][r]),this.model.data.lines[n][r]>this.model.bottomChart.max&&(this.model.bottomChart.max=this.model.data.lines[n][r]));if(this.model.bottomChart.max===-(1/0)&&(this.model.bottomChart.max=0),this.model.bottomChart.min===1/0&&(this.model.bottomChart.min=0),this.model.bottomChart.paddingTop=this.model.height+this.model.paddingTop+50,this.model.bottomChart.count=d,this.model.bottomChart.left=this.model.bottomChart.paddingLeft,this.model.bottomChart.width=this.view.canvas.width-this.model.bottomChart.paddingLeft-this.model.bottomChart.paddingRight,this.model.bottomChart.space=this.model.bottomChart.width/d,this.model.bottomChart.scale=(this.model.bottomChart.max-this.model.bottomChart.min)/this.model.bottomChart.height,this.model.data.y_scaled){var n,r,s,l,d=this.model.data.lines.x.length,h=Math.min(this.model.count,d);for(this.model.max2=-(1/0),this.model.min2=1/0,r=this.model.startIndex;r<this.model.startIndex+h;r++)for(s=1;s<this.model.data.keys.length;s++)n=this.model.data.keys[s],l=this.model.data.actives[n],l&&null!==this.model.data.lines[n][r]&&(this.model.data.lines[n][r]<this.model.min2&&(this.model.min2=this.model.data.lines[n][r]),this.model.data.lines[n][r]>this.model.max2&&(this.model.max2=this.model.data.lines[n][r]));this.model.max2===-(1/0)&&(this.model.max2=1),this.model.min2===1/0&&(this.model.min2=0),this.model.left=this.model.paddingLeft,this.model.top=this.model.paddingTop,this.model.width=this.view.canvas.width-this.model.paddingLeft-this.model.paddingRight,this.model.height=this.view.canvas.height-this.model.paddingTop-this.model.paddingBottom,this.model.space=this.model.width/this.model.count,this.model.scale2=(this.model.max2-this.model.min2)/this.model.height;var u=d-1,g=Math.ceil(70/this.model.space),w=Math.pow(2,Math.ceil(Math.log2(g))),v=this.model.axisXValues_divider;for(v&&this.model.axisXValues2&&this.model.axisXValues2.length&&(v<w?(this.prevState&&(this.prevState.axisXhideOpacity=1),this.model.axisXValues_hide=[].concat(this.model.axisXValues2),this.model.axisXValues_opacity=0):v>w&&(this.prevState&&(this.prevState.axisXhideOpacity=0),this.model.axisXValues_hide=[].concat(this.model.axisXValues2),this.model.axisXValues_opacity=1)),this.model.axisXValues_divider=w,this.model.axisXValues2=[],r=d-1;r>0;r--)(u-r)%w===0&&(this.model.axisXValues2.push(r),u=r);if(x&&x.length>1){var b=this.model.min2;this.model.axisYValues2=[b],b=Math.floor(b/w)*w;for(var D in x){var S=x[D],k=this.view.getValueByY(S,{paddingTop:this.model.paddingTop,max:this.model.max2,scale:this.model.scale2});this.model.axisYValues2.push(k)}}else{w=2;var y=this.model.max2.toString().length;2===y?w=5:y>=3&&(w=Math.pow(10,y-2));var b=this.model.min2,C=this.view.getYByValue(b,{paddingTop:this.model.paddingTop,max:this.model.max2,scale:this.model.scale2});for(this.model.axisYValues2=[b],b=Math.floor(b/w)*w,r=b;r<=2*this.model.max2;r+=w)if(r%w===0){var T=this.view.getYByValue(r,{paddingTop:this.model.paddingTop,max:this.model.max2,scale:this.model.scale2});C-T>=60&&(this.model.axisYValues2.push(r),C=T)}}for(this.model.bottomChart.max2=-(1/0),this.model.bottomChart.min2=1/0,r=0;r<d;r++)for(s=1;s<this.model.data.keys.length;s++)n=this.model.data.keys[s],l=this.model.data.actives[n],l&&null!==this.model.data.lines[n][r]&&(this.model.data.lines[n][r]<this.model.bottomChart.min2&&(this.model.bottomChart.min2=this.model.data.lines[n][r]),this.model.data.lines[n][r]>this.model.bottomChart.max2&&(this.model.bottomChart.max2=this.model.data.lines[n][r]));this.model.bottomChart.max2===-(1/0)&&(this.model.bottomChart.max2=0),this.model.bottomChart.min2===1/0&&(this.model.bottomChart.min2=0),this.model.bottomChart.scale2=(this.model.bottomChart.max2-this.model.bottomChart.min2)/this.model.bottomChart.height}this.model.minCount=this.model.minCount||this.defaultMinCount;var I=this.model.bottomChart.space*this.model.shiftX/this.model.space,M=this.model.bottomChart.paddingLeft+this.model.startIndex*this.model.bottomChart.space-I,S=this.model.bottomChart.paddingTop-3,F=Math.floor(this.model.count*this.model.bottomChart.space),X=this.model.bottomChart.height+6;this.model.bottomChart.caret.left={x:this.model.bottomChart.paddingLeft,y:S,w:M-this.model.bottomChart.paddingLeft,h:X},this.model.bottomChart.caret.right={x:M+F,y:S,w:this.model.bottomChart.width-(M+F)+this.model.bottomChart.paddingLeft+2,h:X},this.model.bottomChart.caret.frame={left:{x:M,y:S,w:14,h:X},right:{x:M+F-14,y:S,w:14,h:X},top:{x:M+14,y:S,w:F-28,h:1},bottom:{x:M+14,y:S+X-1,w:F-28,h:1},x:M,y:S,w:F,h:X},this.model.labels=[];var L=this.model.bottomChart.caret.left.x,P=this.model.bottomChart.caret.left.y+this.model.bottomChart.caret.left.h+24;this.model.barToLines&&(P-=84),X=46;for(r in this.model.data.keys){var R=this.model.data.keys[r],_=this.model.data.names[R];F=o.calculateWidth(_,{fontFamily:"Helvetica, sans-serif",fontSize:22,paddingLeft:50,paddingRight:10}),L+F>this.model.width&&(P=P+X+9,L=this.model.bottomChart.caret.left.x),M=L,S=P;var E={id:R,name:_,x:M,y:S,w:F,h:X,active:this.model.data.actives[R]};this.model.labels.push(E),L=L+F+9}this.model.crosshairX=null,this.model.crosshairY=null,this.model.hoveredIndex=null,null!=this.model.interactionMoveX&&null!=this.model.interactionMoveY&&(this.model.crosshairX=this.model.interactionMoveX,this.model.crosshairY=this.model.interactionMoveY,this.model.hoveredIndex=Math.round(this.model.crosshairX/this.model.space)),this.isModelRefreshed=!0;var Y={startIndex:this.model.startIndex,shiftX:this.model.shiftX,count:this.model.count,scale:this.model.scale,min:this.model.min,max:this.model.max,bottom_scale:this.model.bottomChart.scale,bottom_min:this.model.bottomChart.min,bottom_max:this.model.bottomChart.max,scale2:this.model.scale2,min2:this.model.min2,max2:this.model.max2,bottom_scale2:this.model.bottomChart.scale2,bottom_min2:this.model.bottomChart.min2,bottom_max2:this.model.bottomChart.max2,axisXhideOpacity:this.model.axisXValues_opacity};this.prevState&&!t?(this.model.topChanged=this.topHasDiff(this.prevState,Y),this.model.bottomChanged=this.bottomHasDiff(this.prevState,Y)):(this.model.topChanged=!0,this.model.bottomChanged=!0);var B=this.prevState,A=Y;if(e){keys=Object.keys(e);for(r in keys)R=keys[r],B[R]=e[R]}if(a){keys=Object.keys(a);for(r in keys)R=keys[r],A[R]=a[R]}this.model.onlyCalculate?(this.view.render(this.model),i&&i()):this.model.onlyRender?(this.view.render(this.model),i&&i(),this.prevState=Y):(this.prevState&&Y&&(this.hasDiff(B,A)||e&&a)?this.animateTransition(B,A,i):this.view.refresh(this.model),this.prevState=Y)}},l.prototype.hasDiff=function(t,e){return t.scale!==e.scale||(t.min!==e.min||(t.max!==e.max||(t.bottom_scale!==e.bottom_scale||(t.bottom_min!==e.bottom_min||(t.bottom_max!==e.bottom_max||(t.scale2!==e.scale2||(t.min2!==e.min2||(t.max2!==e.max2||(t.bottom_scale2!==e.bottom_scale2||(t.bottom_min2!==e.bottom_min2||(t.bottom_max2!==e.bottom_max2||t.axisXhideOpacity!==e.axisXhideOpacity)))))))))))},l.prototype.topHasDiff=function(t,e){return!!this.preventTop||(t.scale!==e.scale||(t.min!==e.min||(t.max!==e.max||(t.scale2!==e.scale2||(t.min2!==e.min2||t.max2!==e.max2)))))},l.prototype.bottomHasDiff=function(t,e){return!!this.preventBottom||(t.bottom_scale!==e.bottom_scale||(t.bottom_min!==e.bottom_min||(t.bottom_max!==e.bottom_max||(t.bottom_scale2!==e.bottom_scale2||(t.bottom_min2!==e.bottom_min2||t.bottom_max2!==e.bottom_max2)))))},l.prototype.animateTransition=function(t,e,a){var o=this,i=performance.now(),n=this.animationDuration;this.raf&&(n=this.animationDuration/1,cancelAnimationFrame(this.raf),this.raf=null),this.rafInRaf&&(n=this.animationDuration/1,cancelAnimationFrame(this.rafInRaf),this.rafInRaf=null),this.raf=requestAnimationFrame(function r(s){var l=(s-i)/n;l>1&&(l=1);var d=o.transition(t,e,l);o.view.render(d),l<1?o.rafInRaf=requestAnimationFrame(r):(d=o.transition(t,e,2),o.view.render(d),o.raf=null,o.rafInRaf=null,a&&(o.model.zoomInProgress=!1,o.model.zoomOutProgress=!1,a()))})},l.prototype.transition=function(t,e,a){var o=this;if(t.animateCircleFrom&&e.animateCircleTo)return 2===a?this.model.animateCircle=null:(this.model.animateCircle.current.w=t.animateCircleFrom.from.w+(e.animateCircleTo.to.w-t.animateCircleFrom.from.w)*a,this.model.animateCircle.current.h=t.animateCircleFrom.from.h+(e.animateCircleTo.to.h-t.animateCircleFrom.from.h)*a,this.model.animateCircle.current.r=t.animateCircleFrom.from.r+(e.animateCircleTo.to.r-t.animateCircleFrom.from.r)*a),this.model;if(t.animateDrawFrom&&e.animateDrawTo){if(2===a)this.model.animateDraw=null;else{var i,n,r,s,l,d,h;this.model.animateDraw.progress=a,d=Object.keys(this.model.animateDraw.current);for(l in d)if(h=d[l],this.model.data.actives[h])for(r=this.model.animateDraw.to[h].length,i=0;i<r;i++)n=t.animateDrawFrom.from[h][i],s=e.animateDrawTo.to[h][i],n&&s&&(this.model.animateDraw.current[h][i][0]=n[0]+(s[0]-n[0])*a,this.model.animateDraw.current[h][i][1]=n[1]+(s[1]-n[1])*a,this.model.data.stacked&&(this.model.animateDraw.current[h][i][2]=n[2]+(s[2]-n[2])*a,this.model.animateDraw.current[h][i][3]=n[3]+(s[3]-n[3])*a));d=Object.keys(this.model.animateDraw.bottomCurrent);for(l in d)if(h=d[l],this.model.data.actives[h])for(r=this.model.animateDraw.bottomTo[h].length,i=0;i<r;i++)n=t.animateDrawFrom.bottomFrom[h][i],s=e.animateDrawTo.bottomTo[h][i],n&&s&&(this.model.animateDraw.bottomCurrent[h][i][0]=n[0]+(s[0]-n[0])*a,this.model.animateDraw.bottomCurrent[h][i][1]=n[1]+(s[1]-n[1])*a,this.model.data.stacked&&(this.model.animateDraw.bottomCurrent[h][i][2]=n[2]+(s[2]-n[2])*a,this.model.animateDraw.bottomCurrent[h][i][3]=n[3]+(s[3]-n[3])*a));this.model.animateDraw.caretCurrent.left.x=t.animateDrawFrom.caretFrom.left.x+(e.animateDrawTo.caretTo.left.x-t.animateDrawFrom.caretFrom.left.x)*a,this.model.animateDraw.caretCurrent.left.w=t.animateDrawFrom.caretFrom.left.w+(e.animateDrawTo.caretTo.left.w-t.animateDrawFrom.caretFrom.left.w)*a,this.model.animateDraw.caretCurrent.right.x=t.animateDrawFrom.caretFrom.right.x+(e.animateDrawTo.caretTo.right.x-t.animateDrawFrom.caretFrom.right.x)*a,this.model.animateDraw.caretCurrent.right.w=t.animateDrawFrom.caretFrom.right.w+(e.animateDrawTo.caretTo.right.w-t.animateDrawFrom.caretFrom.right.w)*a,this.model.animateDraw.caretCurrent.frame.left.x=t.animateDrawFrom.caretFrom.frame.left.x+(e.animateDrawTo.caretTo.frame.left.x-t.animateDrawFrom.caretFrom.frame.left.x)*a,this.model.animateDraw.caretCurrent.frame.left.w=t.animateDrawFrom.caretFrom.frame.left.w+(e.animateDrawTo.caretTo.frame.left.w-t.animateDrawFrom.caretFrom.frame.left.w)*a,this.model.animateDraw.caretCurrent.frame.right.x=t.animateDrawFrom.caretFrom.frame.right.x+(e.animateDrawTo.caretTo.frame.right.x-t.animateDrawFrom.caretFrom.frame.right.x)*a,this.model.animateDraw.caretCurrent.frame.right.w=t.animateDrawFrom.caretFrom.frame.right.w+(e.animateDrawTo.caretTo.frame.right.w-t.animateDrawFrom.caretFrom.frame.right.w)*a,this.model.animateDraw.caretCurrent.frame.top.x=t.animateDrawFrom.caretFrom.frame.top.x+(e.animateDrawTo.caretTo.frame.top.x-t.animateDrawFrom.caretFrom.frame.top.x)*a,this.model.animateDraw.caretCurrent.frame.top.w=t.animateDrawFrom.caretFrom.frame.top.w+(e.animateDrawTo.caretTo.frame.top.w-t.animateDrawFrom.caretFrom.frame.top.w)*a,this.model.animateDraw.caretCurrent.frame.bottom.x=t.animateDrawFrom.caretFrom.frame.bottom.x+(e.animateDrawTo.caretTo.frame.bottom.x-t.animateDrawFrom.caretFrom.frame.bottom.x)*a,this.model.animateDraw.caretCurrent.frame.bottom.w=t.animateDrawFrom.caretFrom.frame.bottom.w+(e.animateDrawTo.caretTo.frame.bottom.w-t.animateDrawFrom.caretFrom.frame.bottom.w)*a}return this.model}if(t.animatePointFrom&&e.animatePointTo&&t.animatePointFrom.x!=e.animatePointTo.x)return 2===a?this.model.animatePoint=null:this.model.animatePoint.x=t.animatePointFrom.x+(e.animatePointTo.x-t.animatePointFrom.x)*a,this.model;if(t.animateHideShowLinesFrom&&e.animateHideShowLinesTo)if(2===a)this.model.animateHideShowLines=null;else{var i,h,d=Object.keys(t.animateHideShowLinesFrom);for(i in d)h=d[i],this.model.animateHideShowLines.progress[h]=t.animateHideShowLinesFrom[h]+(e.animateHideShowLinesTo[h]-t.animateHideShowLinesFrom[h])*a}if(t.animateCaretFrom&&e.animateCaretTo){if(2===a)this.model.animateCaret=null,this.model.shiftX=0;else{var m=t.animateCaretFrom[0]+(e.animateCaretTo[0]-t.animateCaretFrom[0])*a,c=m-Math.floor(m);this.model.startIndex=Math.floor(m),this.model.shiftX=-c*this.model.space,this.model.count=t.animateCaretFrom[1]+(e.animateCaretTo[1]-t.animateCaretFrom[1])*a}this.model.onlyCalculate=!0,this.refreshModel(!0,null,null,function(){o.model.onlyCalculate=!1})}return t.scale===e.scale||2===a||this.model.zoomInProgress||this.model.zoomOutProgress||(this.model.scale=t.scale+(e.scale-t.scale)*a),t.min===e.min||2===a||this.model.zoomInProgress||this.model.zoomOutProgress||(this.model.min=t.min+(e.min-t.min)*a),t.max===e.max||2===a||this.model.zoomInProgress||this.model.zoomOutProgress||(this.model.max=t.max+(e.max-t.max)*a),t.bottom_scale===e.bottom_scale||2===a||this.model.zoomInProgress||this.model.zoomOutProgress||(this.model.bottomChart.scale=t.bottom_scale+(e.bottom_scale-t.bottom_scale)*a),t.bottom_min===e.bottom_min||2===a||this.model.zoomInProgress||this.model.zoomOutProgress||(this.model.bottomChart.min=t.bottom_min+(e.bottom_min-t.bottom_min)*a),t.bottom_max===e.bottom_max||2===a||this.model.zoomInProgress||this.model.zoomOutProgress||(this.model.bottomChart.max=t.bottom_max+(e.bottom_max-t.bottom_max)*a),
t.scale2===e.scale2||2===a||this.model.zoomInProgress||this.model.zoomOutProgress||(this.model.scale2=t.scale2+(e.scale2-t.scale2)*a),t.min2===e.min2||2===a||this.model.zoomInProgress||this.model.zoomOutProgress||(this.model.min2=t.min2+(e.min2-t.min2)*a),t.max2===e.max2||2===a||this.model.zoomInProgress||this.model.zoomOutProgress||(this.model.max2=t.max2+(e.max2-t.max2)*a),t.bottom_scale2===e.bottom_scale2||2===a||this.model.zoomInProgress||this.model.zoomOutProgress||(this.model.bottomChart.scale2=t.bottom_scale2+(e.bottom_scale2-t.bottom_scale2)*a),t.bottom_min2===e.bottom_min2||2===a||this.model.zoomInProgress||this.model.zoomOutProgress||(this.model.bottomChart.min2=t.bottom_min2+(e.bottom_min2-t.bottom_min2)*a),t.bottom_max2===e.bottom_max2||2===a||this.model.zoomInProgress||this.model.zoomOutProgress||(this.model.bottomChart.max2=t.bottom_max2+(e.bottom_max2-t.bottom_max2)*a),t.axisXhideOpacity!==e.axisXhideOpacity&&(2===a?this.model.axisXValues_hide=null:this.model.axisXhideOpacity=t.axisXhideOpacity+(e.axisXhideOpacity-t.axisXhideOpacity)*a),this.model},l.prototype.getModel=function(){return this.model},e.Chart=l},function(t,e,a){var o=a(3),i=a(4).EventDriven,n=function(t){this.app=t.app,this.view=t.view,this.active=!1};o.extend(n,i),n.prototype.activate=function(){this.view&&(this.active=!0,this.bindViewEvents())},n.prototype.deActivate=function(){this.view&&(this.active=!1,this.unBindViewEvents())},n.prototype.bindViewEvents=function(){this.view&&("mouse"===this.app.device?(o.on(this.view.$container,"mousedown",this.onEventDown.bind(this)),o.on(this.view.$container,"mousemove",this.onEventMove.bind(this)),o.on(this.view.$container,"mouseup",this.onEventUp.bind(this)),o.on(this.view.$container,"mouseout",this.onEventUp.bind(this)),o.on(this.view.$container,"mouseleave",this.onEventUp.bind(this))):"touch"===this.app.device&&(o.on(this.view.$container,"touchstart",this.onEventDown.bind(this)),o.on(this.view.$container,"touchmove",this.onEventMove.bind(this)),o.on(this.view.$container,"touchend",this.onEventUp.bind(this))))},n.prototype.unBindViewEvents=function(){this.view&&("mouse"===this.app.device?(o.off(this.view.$container,"mousedown"),o.off(this.view.$container,"mousemove"),o.off(this.view.$container,"mouseup"),o.off(this.view.$container,"mouseout"),o.off(this.view.$container,"mouseleave"),o.off(this.view.$container,"mousewheel")):"touch"===this.app.device&&(o.off(this.view.$container,"touchstart"),o.off(this.view.$container,"touchmove"),o.off(this.view.$container,"touchend")))},n.prototype.onEventDown=function(t){this.trigger("down",t)},n.prototype.onEventMove=function(t){this.trigger("move",t)},n.prototype.onEventUp=function(t){this.trigger("up",t)},e.Interaction=n},function(t,e,a){var o=a(3),i=a(8).UI,n=function(t){n.superclass.constructor.call(this,t),this.app=t.app,this.parent=t.parent,this.canvas=null,this.ctx=null,this.left=0,this.top=0,this.ready=!1,this.createView()};o.inherit(n,i),n.prototype.createView=function(){this.canvas=o.createElement({tag:"canvas",target:this.$container}),this.ctx=this.canvas.getContext("2d"),this.ctx.lineCap="round",this.ctx.lineJoin="round",this.canvas_top=o.createElement({tag:"canvas"}),this.canvas_bottom=o.createElement({tag:"canvas"}),this.ctx_top=this.canvas_top.getContext("2d"),this.ctx_bottom=this.canvas_bottom.getContext("2d");var t=setInterval(function(){this.$container.offsetWidth&&this.$container.offsetHeight&&(clearInterval(t),this.resize(),this.ready=!0,this.trigger("ready"))}.bind(this),10)},n.prototype.resize=function(){var t=o.box(this.$container);this.left=t.left,this.top=t.top,this.canvas.width=t.width,this.canvas.height=t.height,this.canvas_top.width=t.width,this.canvas_top.height=t.height,this.canvas_bottom.width=t.width,this.canvas_bottom.height=t.height},n.prototype.refresh=function(t){this.ready&&window.requestAnimationFrame(function(){this.render(t)}.bind(this))},n.prototype.getYByValue=function(t,e){return e.paddingTop+(e.max-t)/e.scale},n.prototype.getValueByY=function(t,e){return e.max-(t-e.paddingTop)*e.scale},n.prototype.getYByIndex=function(t,e,a){return this.getYByValue(a[t],e)},n.prototype.getCrossYByX=function(t,e,a){var i=0,n=this.getLeftIndexByX(t,e),r=this.getXByIndex(n,e),s=this.getYByIndex(n,e,a),l=n+1,d=this.getXByIndex(l,e),h=this.getYByIndex(l,e,a),m=o.getCrossLinePoint({x1:r,y1:s,x2:d,y2:h},{x1:t,y1:-9e3,x2:t,y2:9e3});return m&&(i=m.y),i},n.prototype.getXByIndex=function(t,e,a){return"undefined"==typeof a&&(a=e.space),e.paddingLeft+e.shiftX+(t-e.startIndex)*a},n.prototype.getLeftIndexByX=function(t,e){return e.startIndex+Math.floor((t-e.shiftX-e.paddingLeft)/e.space)},n.prototype.getNearestPointByX=function(t,e){var a=0,o=0,i=this.getLeftIndexByX(t,e),n=i+1,r=this.getXByIndex(i,e),s=this.getXByIndex(n,e),l=Math.abs(t-r),d=Math.abs(t-s);return a=i,o=r,d<l&&(a=n,o=s),{x:o,index:a,d0:l,d1:d}},n.prototype.render=function(t){if(t.onlyCalculate||this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),t.animateCircle){this.ctx.save();var e=t.width/2,a=t.top+t.height/2,o=e-t.animateCircle.current.w/2,i=a-t.animateCircle.current.h/2,n=t.animateCircle.current.w,r=t.animateCircle.current.w,s=t.animateCircle.current.r;this.ctx.roundRect(o,i,n,r,s,!1,!1),this.ctx.clip()}if(t.arcInState){this.ctx.save();var e=t.width/2,a=t.top+t.height/2,o=e-t.arcInState.w/2,i=a-t.arcInState.h/2,n=t.arcInState.w,r=t.arcInState.w,s=t.arcInState.r;this.ctx.arc(e,a,s,0,2*Math.PI),this.ctx.clip()}t.data.stacked||t.data.percentage||this.drawAxisY(this.ctx,t),t.arcInState||this.drawAxisX(this.ctx,t),this.drawTopChart(this.ctx_top,t),t.arcInState||"touch"!=this.app.device&&this.drawCrosshair(this.ctx,t),t.arcInState||(t.data.stacked||t.data.percentage)&&this.drawAxisY(this.ctx,t),t.arcInState||this.drawPoint(this.ctx,t),(t.animateCircle||t.arcInState)&&this.ctx.restore(),this.drawTitle(this.ctx,t),this.drawBottomChart(this.ctx_bottom,t),this.drawLabels(this.ctx,t)},n.prototype.drawTopChart=function(t,e){if(e.topChanged){t.clearRect(0,0,this.canvas_top.width,this.canvas_top.height);var a,o,i,n,r,s,l=-Math.PI+e.startIndex*Math.PI*2/70;if(e.data.percentage){for(e.data.hover=[],s=Object.keys(e.data.keys),a=s.length-1;a>=0;a--)if(o=s[a],i=e.data.keys[o],n=e.data.lines[i],r=e.data.actives[i],e.data.draw||(e.data.draw={}),e.data.draw[i]=[],e.data.percentage&&(n=e.data.percentages[i]),e.animateHideShowLines&&"undefined"!=typeof e.animateHideShowLines.progress[i])t.save(),t.beginPath(),t.lineCap="round",t.lineJoin="round",t.lineWidth=e.lineWidth,t.strokeStyle=e.data.colors[i],t.fillStyle=e.data.colors[i],t.globalAlpha=Math.abs(e.animateHideShowLines.progress[i]),this.drawTopLine(t,e,n,i,e.data.keys[Number(o)-1]),t.restore();else if(r){t.beginPath(),t.lineCap="round",t.lineJoin="round",t.lineWidth=e.lineWidth,t.fillStyle=e.data.colors[i],t.strokeStyle=e.data.colors[i];var d=l,h=d+e.data.per[i][e.startIndex]*Math.PI*2/100,m=d+e.data.per[i][e.startIndex]*Math.PI*2/100/2;l=h,this.drawTopLine(t,e,n,i,e.data.keys[Number(o)-1],d,m,h)}}else for(o in e.data.keys)i=e.data.keys[o],n=e.data.lines[i],r=e.data.actives[i],e.data.draw||(e.data.draw={}),(e.data.stacked||e.data.percentage)&&(e.data.draw[i]=[]),e.data.percentage&&(n=e.data.percentages[i]),e.animateHideShowLines&&"undefined"!=typeof e.animateHideShowLines.progress[i]?(t.save(),t.beginPath(),t.lineCap="round",t.lineJoin="round",t.lineWidth=e.lineWidth,t.strokeStyle=e.data.colors[i],t.fillStyle=e.data.colors[i],t.globalAlpha=Math.abs(e.animateHideShowLines.progress[i]),this.drawTopLine(t,e,n,i,e.data.keys[Number(o)-1]),t.restore()):r&&(t.beginPath(),t.lineCap="round",t.lineJoin="round",t.lineWidth=e.lineWidth,t.fillStyle=e.data.colors[i],t.strokeStyle=e.data.colors[i],this.drawTopLine(t,e,n,i,e.data.keys[Number(o)-1]))}this.ctx.drawImage(this.canvas_top,0,0,this.canvas_top.width,this.canvas_top.height)},n.prototype.drawBottomChart=function(t,e){if(e.bottomChanged){t.clearRect(0,0,this.canvas_bottom.width,this.canvas_bottom.height);var a,o,i,n,r,s;if(e.data.percentage)for(s=Object.keys(e.data.keys),a=s.length-1;a>=0;a--)o=s[a],i=e.data.keys[o],n=e.data.lines[i],r=e.data.actives[i],e.data.bottomDraw||(e.data.bottomDraw={}),e.data.bottomDraw[i]=[],n=e.data.bottomPercentages[i],e.animateHideShowLines&&"undefined"!=typeof e.animateHideShowLines.progress[i]?(t.save(),t.beginPath(),t.lineCap="round",t.lineJoin="round",t.lineWidth=e.bottomChart.lineWidth,t.strokeStyle=e.data.colors[i],t.fillStyle=e.data.colors[i],t.globalAlpha=Math.abs(e.animateHideShowLines.progress[i]),this.drawBottomLine(t,e,n,i,e.data.keys[Number(o)-1]),t.restore()):r&&(t.beginPath(),t.lineCap="round",t.lineJoin="round",t.lineWidth=e.bottomChart.lineWidth,t.strokeStyle=e.data.colors[i],t.fillStyle=e.data.colors[i],this.drawBottomLine(t,e,n,i,e.data.keys[Number(o)-1]));else for(o in e.data.keys)i=e.data.keys[o],n=e.data.lines[i],r=e.data.actives[i],e.data.bottomDraw||(e.data.bottomDraw={}),(e.data.stacked||e.data.percentage)&&(e.data.bottomDraw[i]=[]),e.data.percentage&&(n=e.data.bottomPercentages[i]),e.animateHideShowLines&&"undefined"!=typeof e.animateHideShowLines.progress[i]?(t.save(),t.beginPath(),t.lineCap="round",t.lineJoin="round",t.lineWidth=e.bottomChart.lineWidth,t.strokeStyle=e.data.colors[i],t.fillStyle=e.data.colors[i],t.globalAlpha=Math.abs(e.animateHideShowLines.progress[i]),this.drawBottomLine(t,e,n,i,e.data.keys[Number(o)-1]),t.restore()):r&&(t.beginPath(),t.lineCap="round",t.lineJoin="round",t.lineWidth=e.bottomChart.lineWidth,t.strokeStyle=e.data.colors[i],t.fillStyle=e.data.colors[i],this.drawBottomLine(t,e,n,i,e.data.keys[Number(o)-1]))}this.ctx.save(),e.barToLines&&(this.ctx.rect(0,0,0,0),this.ctx.clip()),this.ctx.drawImage(this.canvas_bottom,0,0,this.canvas_bottom.width,this.canvas_bottom.height),this.drawBottomCaret(this.ctx,e),this.ctx.restore()},n.prototype.drawAxisY=function(t,e){var a,i=e.paddingLeft,n=e.paddingLeft+e.width;if(e.data.y_scaled){var r=!1;if(e.data.actives.y0){t.beginPath(),t.lineWidth=1,t.textAlign="left",t.font="normal 16px Helvetica, sans-serif",t.strokeStyle=e.style[e.renderStyle].gridColor,t.fillStyle=e.data.colors.y0;for(var s in e.axisYValues){var l=e.axisYValues[s];if(a=this.getYByValue(l,e),a<e.top)break;t.moveTo(i+e.gridSpace,a),t.lineTo(n-e.gridSpace,a),t.fillText(o.collapseNumber(l),i+e.gridSpace,a-6)}t.stroke(),r=!0}if(e.data.actives.y1){t.beginPath(),t.lineWidth=1,t.textAlign="right",t.font="normal 16px Helvetica, sans-serif",t.strokeStyle=e.style[e.renderStyle].gridColor,t.fillStyle=e.data.colors.y1;for(var s in e.axisYValues2){var l=e.axisYValues2[s];if(a=this.getYByValue(l,{paddingTop:e.paddingTop,max:e.max2,scale:e.scale2}),a<e.top)break;r||(t.moveTo(i+e.gridSpace,a),t.lineTo(n-e.gridSpace,a)),0==s?t.fillText(o.collapseNumber(l),n-e.gridSpace,a-6):l%1e3===0?t.fillText((l/1e3).toFixed(0)+" K",n-e.gridSpace,a-6):t.fillText((l/1e3).toFixed(1)+" K",n-e.gridSpace,a-6)}t.stroke()}}else{t.beginPath(),t.lineWidth=1,t.textAlign="left",t.font="normal 16px Helvetica, sans-serif",t.strokeStyle=e.style[e.renderStyle].gridColor,t.fillStyle=e.style[e.renderStyle].gridValuesColor;for(var s in e.axisYValues){var l=e.axisYValues[s];if(a=this.getYByValue(l,e),a<e.top)break;t.moveTo(i+e.gridSpace,a),t.lineTo(n-e.gridSpace,a),t.fillText(o.collapseNumber(l),i+e.gridSpace,a-6)}t.stroke()}},n.prototype.drawAxisX=function(t,e){var a=e.startIndex;a<0&&(a=0);var i,n,r=a+e.count+1,s=e.paddingTop+e.height;n=e.data.lines.x,t.beginPath(),t.textAlign="center",t.font="normal 16px Helvetica, sans-serif",t.fillStyle=e.style[e.renderStyle].timeColor;for(var l,d=a;d<r;d++)n[d]&&(i=Math.floor((d-a)*e.space)+e.shiftX,l=e.axisXFormatAsTime?o.formatDate("hh:ii",n[d]):o.formatDate("d Mon",n[d]),e.axisXValues.indexOf(d)!==-1&&t.fillText(l,i,s+20));t.beginPath(),t.strokeStyle=e.style[e.renderStyle].axisColor,t.lineWidth=1,t.moveTo(e.paddingLeft+e.gridSpace,e.paddingTop+e.height),t.lineTo(e.paddingLeft+e.width-e.gridSpace,e.paddingTop+e.height),t.stroke(),t.closePath()},n.prototype.drawTitle=function(t,e){var a=e.data.lines.x;if(t.save(),t.beginPath(),t.textBaseline="bottom",t.textAlign="left",t.font="bold 22px Helvetica, sans-serif",e.axisXFormatAsTime){t.fillStyle="dodgerblue",t.fillText("Zoom Out",e.gridSpace+30,e.paddingTop-30);try{t.drawImage(this.parent.zoomOutImg,e.gridSpace,e.paddingTop-30-22,22,22)}catch(t){}}else t.fillStyle=e.style[e.renderStyle].title,t.fillText(e.title,e.gridSpace,e.paddingTop-30);t.fillStyle=e.style[e.renderStyle].title;var i,n,r=e.startIndex+Math.ceil(e.gridSpace/e.space)+2,s=e.startIndex+Math.ceil(e.count-e.gridSpace/e.space)-4;e.data.percentage&&(r=e.startIndex+Math.ceil(e.gridSpace/e.space)+0,s=e.startIndex+Math.ceil(e.count-e.gridSpace/e.space)-0),r<0&&(r=0),s>e.data.lines.x.length-2&&(s=e.data.lines.x.length-2),t.canvas.width<460&&t.canvas.width>380?(t.font="bold 15px Helvetica, sans-serif",i=o.formatDate("d Mon YEAR",a[r]),n=o.formatDate("d Mon YEAR",a[s])):t.canvas.width<381?(t.font="bold 14px Helvetica, sans-serif",i=o.formatDate("d/M/YEAR",a[r]),n=o.formatDate("d/M/YEAR",a[s])):(t.font="bold 16px Helvetica, sans-serif",i=o.formatDate("d Month YEAR",a[r]),n=o.formatDate("d Month YEAR",a[s]));var l=i+" - "+n;if(e.axisXFormatAsTime){var d=e.count/25;e.data.percentage?e.count<2?l=o.formatDate("Week, d Month YEAR",a[e.startIndex]):(r=e.startIndex,s=e.startIndex+Math.ceil(e.count)-1,t.canvas.width<460&&t.canvas.width>380?(t.font="bold 15px Helvetica, sans-serif",i=o.formatDate("d Mon YEAR",a[r]),n=o.formatDate("d Mon YEAR",a[s])):t.canvas.width<381?(t.font="bold 14px Helvetica, sans-serif",i=o.formatDate("d/M/YEAR",a[r]),n=o.formatDate("d/M/YEAR",a[s])):(t.font="bold 16px Helvetica, sans-serif",i=o.formatDate("d Month YEAR",a[r]),n=o.formatDate("d Month YEAR",a[s])),l=i+" - "+n):(d<2||e.barToLines)&&(l=o.formatDate("Week, d Month YEAR",a[this.getNearestPointByX(e.paddingLeft+e.gridSpace,e).index]),t.canvas.width<460&&(l=o.formatDate("d Mon YEAR",a[this.getNearestPointByX(e.paddingLeft+e.gridSpace,e).index])))}t.textAlign="right",t.fillText(l,e.paddingLeft+e.width-e.gridSpace,e.paddingTop-30),t.restore()},n.prototype.drawCrosshair=function(t,e){if(!e.animateCircle&&!e.arc){if(null==e.crosshairX||null==e.crosshairY)return void(e.crosshair=null);var a=e.paddingTop,i=e.paddingTop+e.height,n=e.crosshairX,r=e.crosshairY,s=this.getNearestPointByX(n,e),l=s.index,d=s.x;if(e.data.lines.x[l]&&r>=a&&r<=i){t.dashedLinePattern(n,a-18,n,i,[4,4],e.style[e.renderStyle].crosshairColor,1),t.fillStyle=e.style[e.renderStyle].crosshairColor;var h=o.formatDate("d Month YEAR",e.data.lines.x[l]);e.axisXFormatAsTime&&(h=o.formatDate("d Mon hh:ii",e.data.lines.x[l])),t.textAlign="center",d<e.width/2-e.width/4?(t.textAlign="left",d-=5):d>e.width/2+e.width/4&&(t.textAlign="right",d+=5),t.font="normal 12px Helvetica, sans-serif",t.fillText(h,n,a-23),e.crosshair={xx:d,index:l}}}},n.prototype.drawTopLine=function(t,e,a,i,n,r,s,l){var d,h,m,c,p,f=e.startIndex+e.count+2;f>a.length&&(f=a.length);var u=e.space,g=e.paddingLeft+e.shiftX-(e.startIndex>=0?u:0),w=this.getYByValue(a[e.startIndex>0?e.startIndex-1:0],e);if(e.data.y_scaled&&"y1"==i&&(w=this.getYByValue(a[e.startIndex>0?e.startIndex-1:0],{paddingTop:e.paddingTop,max:e.max2,scale:e.scale2})),e.animateDraw&&e.animateDraw.current&&e.animateDraw.current[i]&&e.animateDraw.current[i][0])if(e.data.stacked)for(t.lineWidth=1,a=e.animateDraw.current[i],d=0;d<a.length;d++)null!=a[d]&&(h=a[d][0],m=a[d][1],c=a[d][2],p=a[d][3],t.fillRect(h,m,c,p));else{for(g=e.animateDraw.current[i][0][0],w=e.animateDraw.current[i][0][1],t.moveTo(g,w),a=e.animateDraw.current[i],d=1;d<a.length;d++)null!=a[d]&&(h=a[d][0],m=a[d][1],t.lineTo(h,m));t.stroke()}else if(e.data.stacked)for(t.lineWidth=1,d=e.startIndex;d<f;d++)null!=a[d]&&(h=this.getXByIndex(d,e,u)-u/2,bot_v=0,n&&(bot_v=e.data.stackes[n][d]),m=this.getYByValue(a[d]+bot_v,e),bot_y=this.getYByValue(bot_v,e),c=e.space+1,p=bot_y-m+1,t.fillRect(h,m,c,p),e.data.draw[i].push([h,m,c,p]));else if(e.data.percentage){var v=e.width/2,y=e.top+e.height/2;for(e.arc||t.moveTo(g,w),e.data.draw[i]=[],e.data.draw[i].push([g,w]),d=e.startIndex;d<f;d++)if(null!=a[d])if(e.arc&&d==e.startIndex){t.save(),t.translate(v,y),t.beginPath(),t.lineWidth=1,t.moveTo(0,0),t.arc(0,0,600,r,l),t.lineTo(0,0),t.closePath(),t.fill(),t.stroke();var x=o.getXY(0,0,130,s);t.fillStyle="#fff",t.textAlign="center",t.textBaseline="middle";var b=30,C=e.data.per[i][d];C>30&&(b=30),C>20&&C<=30&&(b=26),C>10&&C<=20&&(b=22),C>5&&C<=10&&(b=18),C<=5&&(b=14),t.font="bold "+b+"px Helvetica, sans-serif",t.fillText(Math.round(e.data.per[i][d])+"%",x[0],x[1]),e.data.hover.push({line:i,i:d,x:x[0]+v,y:x[1]+y}),t.restore()}else h=this.getXByIndex(d,e,u),m=this.getYByValue(a[d],e),t.lineTo(h,m),e.data.draw[i].push([h,m]),g=h,w=m;e.arc||(t.lineTo(g,e.paddingTop+e.height),t.lineTo(-20,e.paddingTop+e.height),t.closePath(),e.onlyCalculate||t.fill())}else{for(t.moveTo(g,w),e.data.draw[i]=[],e.data.draw[i].push([g,w]),d=e.startIndex;d<f;d++)null!=a[d]&&(h=this.getXByIndex(d,e,u),m=this.getYByValue(a[d],e),e.data.y_scaled&&"y1"==i&&(m=this.getYByValue(a[d],{paddingTop:e.paddingTop,max:e.max2,scale:e.scale2})),t.lineTo(h,m),e.data.draw[i].push([h,m]),g=h,w=m);e.onlyCalculate||t.stroke()}},n.prototype.drawBottomLine=function(t,e,a,o,i){var n,r,s,l=e.bottomChart.count;l>a.length-1&&(l=a.length-1);var d=e.bottomChart.paddingLeft,m=this.getYByValue(a[0],e.bottomChart);if(e.data.y_scaled&&"y1"==o&&(m=this.getYByValue(a[0],{paddingTop:e.bottomChart.paddingTop,max:e.bottomChart.max2,scale:e.bottomChart.scale2})),t.save(),t.rect(e.bottomChart.paddingLeft,e.bottomChart.paddingTop,e.bottomChart.width,e.bottomChart.height+2),t.lineWidth=1,t.roundRect(e.bottomChart.paddingLeft,e.bottomChart.paddingTop,e.bottomChart.width,e.bottomChart.height+2,14,!1,!1),t.clip(),e.animateDraw&&e.animateDraw.bottomCurrent&&e.animateDraw.bottomCurrent[o])if(e.data.stacked)for(t.lineWidth=1,t.fillStyle=e.data.colors[o],a=e.animateDraw.bottomCurrent[o],n=0;n<a.length;n++)null!=a[n]&&(r=a[n][0],s=a[n][1],w=a[n][2],h=a[n][3],t.fillRect(r,s,w,h));else{for(d=e.animateDraw.bottomCurrent[o][0][0],m=e.animateDraw.bottomCurrent[o][0][1],t.beginPath(),t.moveTo(d,m),a=e.animateDraw.bottomCurrent[o],n=1;n<a.length;n++)null!=a[n]&&(r=a[n][0],s=a[n][1],t.lineTo(r,s));t.stroke()}else if(e.data.stacked)for(t.lineWidth=1,n=0;n<l;n++)null!=a[n]&&(r=d+e.bottomChart.space,bot_v=0,i&&(bot_v=e.data.bottomStackes[i][n]),s=this.getYByValue(a[n]+bot_v,e.bottomChart),bot_y=this.getYByValue(bot_v,e.bottomChart),w=e.bottomChart.space+1,h=bot_y-s+1,t.fillRect(r,s,w,h),e.data.bottomDraw[o].push([r,s,w,h]),d=r);else if(e.data.percentage){for(t.beginPath(),t.lineWidth=1,t.moveTo(d,m),e.data.bottomDraw[o]=[],e.data.bottomDraw[o].push([d,m]),n=0;n<l;n++)null!=a[n]&&(r=d+e.bottomChart.space,s=this.getYByValue(a[n],e.bottomChart),t.lineTo(r,s),e.data.bottomDraw[o].push([r,s]),d=r,m=s);t.lineTo(d,e.bottomChart.paddingTop+e.bottomChart.height),t.lineTo(-20,e.bottomChart.paddingTop+e.bottomChart.height),t.closePath(),e.onlyCalculate||t.fill()}else{for(t.beginPath(),t.moveTo(d,m),e.data.bottomDraw[o]=[],e.data.bottomDraw[o].push([d,m]),n=0;n<l;n++)null!=a[n]&&(r=d+e.bottomChart.space,s=this.getYByValue(a[n],e.bottomChart),e.data.y_scaled&&"y1"==o&&(s=this.getYByValue(a[n],{paddingTop:e.bottomChart.paddingTop,max:e.bottomChart.max2,scale:e.bottomChart.scale2})),t.lineTo(r,s),e.data.bottomDraw[o].push([r,s]),d=r,m=s);e.onlyCalculate||t.stroke()}t.restore()},n.prototype.drawBottomCaret=function(t,e){var a=e.bottomChart.caret;e.animateDraw&&(a=e.animateDraw.caretCurrent),t.beginPath(),t.fillStyle=e.style[e.renderStyle].bottomColor,t.strokeStyle=e.style[e.renderStyle].bottomColor,t.roundRect(a.left.x,a.left.y,a.left.w+10,a.left.h,{upperLeft:10,upperRight:0,lowerLeft:10,lowerRight:0},!0,!0),e.bottomChart.width-e.bottomChart.caret.right.x+e.bottomChart.paddingLeft>0&&(t.beginPath(),t.fillStyle=e.style[e.renderStyle].bottomColor,t.strokeStyle=e.style[e.renderStyle].bottomColor,t.roundRect(a.right.x-10,a.right.y,a.right.w+10,a.right.h,{upperLeft:0,upperRight:10,lowerLeft:0,lowerRight:10},!0,!0)),t.beginPath(),t.fillStyle=e.style[e.renderStyle].caretColor,t.strokeStyle=e.style[e.renderStyle].caretColor,t.roundRect(a.frame.left.x,a.frame.left.y,a.frame.left.w,a.frame.left.h-1,{upperLeft:10,upperRight:0,lowerLeft:10,lowerRight:0},!0,!0),t.fillStyle=e.style[e.renderStyle].caretHoleColor,t.strokeStyle=e.style[e.renderStyle].caretHoleColor,t.roundRect(a.frame.left.x+6,a.frame.left.y+22,2,16,1,!0,!0),t.fillStyle=e.style[e.renderStyle].caretColor,t.strokeStyle=e.style[e.renderStyle].caretColor,t.roundRect(a.frame.right.x,a.frame.right.y,a.frame.right.w,a.frame.right.h-1,{upperLeft:0,upperRight:10,lowerLeft:0,lowerRight:10},!0,!0),t.fillStyle=e.style[e.renderStyle].caretHoleColor,t.strokeStyle=e.style[e.renderStyle].caretHoleColor,t.roundRect(a.frame.right.x+6,a.frame.right.y+22,2,16,1,!0,!0),t.fillStyle=e.style[e.renderStyle].caretColor,t.strokeStyle=e.style[e.renderStyle].caretColor,t.fillRect(a.frame.top.x,a.frame.top.y,a.frame.top.w,a.frame.top.h),t.fillRect(a.frame.bottom.x,a.frame.bottom.y,a.frame.bottom.w,a.frame.bottom.h),t.closePath()},n.prototype.drawLabels=function(t,e){if(t.save(),e.drawSegmentLabel){var a=e.drawSegmentLabel.name,o=e.drawSegmentLabel.value,i=e.drawSegmentLabel.color,n=280,r=e.drawSegmentLabel.x,s=e.drawSegmentLabel.y;t.beginPath(),t.fillStyle=e.style[e.renderStyle].tooltipBg,t.strokeStyle=e.style[e.renderStyle].tooltipBg,t.shadowColor=e.style[e.renderStyle].tooltipShadow,t.shadowBlur=3,t.roundRect(r-n/2,s-100,n,60,14,!0,!1),t.beginPath(),t.fillStyle=e.style[e.renderStyle].tooltipTitle,t.textAlign="left",t.textBaseline="middle",t.font="normal 20px Helvetica, sans-serif",t.fillText(a,r-n/2+20,s-70),t.beginPath(),t.fillStyle=i,t.textAlign="right",t.textBaseline="middle",t.font="normal 20px Helvetica, sans-serif",t.fillText(o,r+n/2-20,s-70)}var l,r,s,n,d,h,m;for(l in e.labels)if(h=e.labels[l],m=h.name,r=h.x,s=h.y,n=h.w,d=h.h,h.active){t.beginPath(),t.lineWidth=2,t.fillStyle=e.data.colors[h.id],t.strokeStyle=e.data.colors[h.id],t.roundRect(r,s,n,d,25,!0,!0);try{t.drawImage(this.parent.checkerImg,r+6,s+4,35,35)}catch(t){}t.beginPath(),t.textBaseline="middle",t.textAlign="left",t.font="normal 22px Helvetica, sans-serif",t.fillStyle=e.style[e.renderStyle].labelText,t.fillText(m,r+44,s+24)}else t.beginPath(),t.lineWidth=2,t.strokeStyle=e.data.colors[h.id],t.roundRect(r,s,n,d,25,!1,!0),t.beginPath(),t.textBaseline="middle",t.font="normal 22px Helvetica, sans-serif",t.textAlign="center",t.fillStyle=e.data.colors[h.id],t.fillText(m,r+n/2,s+24);t.restore()},n.prototype.drawPoint=function(t,e){if(null==e.pointX||null==e.pointY)return void(e.point=null);var a=e.pointX,i=e.pointY;e.animatePoint&&(a=e.animatePoint.x,e.pointX=a);var n=e.paddingTop,r=e.paddingTop+e.height,s=this.getNearestPointByX(a,e),l=s.index,d=s.x;if(e.data.lines.x[l]){var h,m,c=0;if(e.animatePoint&&(c=s.d0/(s.d0+s.d1)),t.beginPath(),t.strokeStyle=e.style[e.renderStyle].crosshairColor,t.fillStyle=e.style[e.renderStyle].crosshairColor,t.lineWidth=1,i>=n&&i<=r){e.animatePoint?(t.moveTo(a,n),t.lineTo(a,r)):(t.moveTo(d,n),t.lineTo(d,r)),t.stroke();var p=[];t.save();var f,u,g,w,v,y,x,b;if(e.data.stacked){var C=0,T=l-e.startIndex,D=[];for(f in e.data.keys){u=e.data.keys[f];for(var S in e.data.draw[u]){var k=e.data.draw[u][S];k&&(k[0]||k[1])&&(D[S]=k)}}t.save(),t.lineWidth=.5,t.fillStyle=e.style[e.renderStyle].mask,t.strokeStyle=e.style[e.renderStyle].mask,t.beginPath();var I=0,M=r;for(f=C;f<T;f++){var F=D[f];if(!F)break;f==C?(I=F[0],t.moveTo(F[0],M),t.lineTo(F[0],F[1]),t.lineTo(F[0]+F[2],F[1])):f<T-1&&(t.lineTo(F[0],F[1]),t.lineTo(F[0]+F[2],F[1])),f==T-1&&(t.lineTo(F[0],F[1]),t.lineTo(F[0]+F[2],F[1]),t.lineTo(F[0]+F[2],M))}for(t.closePath(),t.fill(),t.stroke(),t.beginPath(),I=0,M=r,f=T+1;f<D.length;f++){var F=D[f];if(!F)break;f==T+1?(I=F[0],t.moveTo(F[0],M),t.lineTo(F[0],F[1]),t.lineTo(F[0]+F[2],F[1])):f<D.length-1&&(t.lineTo(F[0],F[1]),t.lineTo(F[0]+F[2],F[1])),f==D.length-1&&(t.lineTo(F[0],F[1]),t.lineTo(F[0]+F[2],F[1]),t.lineTo(F[0]+F[2],M))}t.closePath(),t.fill(),t.stroke(),t.restore()}for(f in e.data.keys)u=e.data.keys[f],g=e.data.lines[u],b=e.data.stackes&&e.data.stackes[u]?e.data.stackes[u]:{},w=e.style[e.renderStyle].bgColor,v=e.data.colors[u],y=e.data.actives[u],y&&(p.push({id:e.data.names[u],value:g[l],stack:b[l],color:e.data.colors[u]}),e.data.stacked||(x=e.animatePoint?e.data.y_scaled&&"y1"==u?this.getCrossYByX(a,{paddingLeft:e.paddingLeft,shiftX:e.shiftX,startIndex:e.startIndex,space:e.space,paddingTop:e.paddingTop,max:e.max2,scale:e.scale2},g):this.getCrossYByX(a,e,g):e.data.y_scaled&&"y1"==u?this.getYByValue(g[l],{paddingTop:e.paddingTop,max:e.max2,scale:e.scale2}):this.getYByValue(g[l],e),t.beginPath(),t.lineWidth=e.lineWidth,t.fillStyle=w,t.strokeStyle=v,e.animatePoint?t.arc(a,x,6,0,2*Math.PI):t.arc(d,x,6,0,2*Math.PI),t.fill(),t.stroke()));var X=288,L=0;p.length&&p.reduce(function(t,e){e.value>L&&(L=e.value)});var P=o.formatDate("Wee, d Mon YEAR",e.data.lines.x[l]);e.axisXFormatAsTime&&(P=o.formatDate("hh:ii",e.data.lines.x[l]));var R=e.point&&e.point.prevTitle?e.point.prevTitle:P;L>0&&(minWidth=o.calculateWidth(L.toString(),{fontFamily:"Helvetica, sans-serif",fontSize:18,paddingLeft:20,paddingRight:20}));var _=0;e.data.stacked&&p.length>1&&(p.map(function(t){_+=t.value}),p.push({id:"All",value:_,stack:_,color:e.style[e.renderStyle].tooltipTitle}));var E=p.length,Y=Math.max(58,50+32*E);t.fillStyle=e.style[e.renderStyle].tooltipBg,t.strokeStyle=e.style[e.renderStyle].tooltipBg,t.shadowColor=e.style[e.renderStyle].tooltipShadow,t.shadowBlur=3;var B=d-X/2;e.animatePoint&&(B=a-X/2);var A=n-20;B<3&&(B=3),B+X>e.width-3&&(B=e.width-3-X),(e.axisXFormatAsTime||e.data.percentage)&&(e.width-X>30&&(B=d-X-30,B<0&&(B=d+30),e.animatePoint&&(B=a-X-30,B<0&&(B=a+30))),A=n+10,B<1&&(B=1),B+X>e.width-1&&(B=e.width-1-X)),t.roundRect(B,A,X,Y,14,!0,!1);var V,H=18;t.beginPath(),t.shadowBlur=0,t.fillStyle=e.style[e.renderStyle].tooltipTitle,t.textAlign="left",t.textBaseline="top",t.save(),t.globalAlpha=1-c,V=H-H*c,t.font="bold "+V+"px Helvetica, sans-serif",t.fillText(P,B+20,A+20-5*c),t.restore(),t.save(),t.globalAlpha=Math.abs(c),V=Math.abs(H*c),t.font="bold "+V+"px Helvetica, sans-serif",t.fillText(R,B+20,A+20+H-V),t.restore();try{!e.axisXFormatAsTime&&p.length&&t.drawImage(this.parent.arrowImg,B+X-30,A+20,10,20)}catch(t){}i=A+20+32;for(f in p)g=p[f],name=g.id,v=g.color,h=o.formatTo3(g.value),m=e.point&&e.point.prevVisibleLines[f]?e.point.prevVisibleLines[f]._value:h,t.fillStyle=e.style[e.renderStyle].tooltipTitle,t.textAlign="left",t.font="normal "+H+"px Helvetica, sans-serif",t.fillText(name,B+20,i+32*f),t.textAlign="right",t.font="bold "+H+"px Helvetica, sans-serif",t.fillStyle=v,t.save(),t.globalAlpha=Math.abs(1-c),V=Math.abs(H-H*c),t.font="bold "+V+"px Helvetica, sans-serif",t.fillText(h,B+X-20,i+32*f-5*c),t.restore(),t.save(),t.globalAlpha=Math.abs(c),V=Math.abs(H*c),t.font="bold "+V+"px Helvetica, sans-serif",t.fillText(m,B+X-20,i+32*f+H-V),t.restore(),p[f]._value=h,p[f]._valueX=B+X-20,p[f]._valueY=i+32*f;t.restore(),e.point={x:B,y:A,w:X,h:Y,xx:e.animatePoint?a:d,ii:l-e.startIndex+1,bottomii:e.startIndex+~~(e.count/2),caret:e.bottomChart.caret,index:l,prevVisibleLines:p,canZoom:p.length>0,prevTitle:P,titleX:B+20,titleY:A+20}}}},e.ChartView=n},function(t,e,a){var o=a(3),i=a(4).EventDriven,n=function(t){t=t||{};var e=t.className;t.extraClassName&&(e+=" "+t.extraClassName);var a=null;t.noDisplayOnCreate===!0&&(a=[{display:"none"}]),this.$container=null==t.container?o.createElement({class_name:e,attributes:a}):o.getElement(t.container),this.parent=t.parent,this.appendTo(t.appendTo||this.parent)};o.extend(n,i),n.prototype.appendTo=function(t){t&&(t instanceof Element?t.appendChild(this.$container):t instanceof n?t.$container.append?t.$container.append(this.$container):t.$container.appendChild(this.$container):console.trace("ERROR: UI want to append to unsupported parent",t))},n.prototype.show=function(){return this.hidden?(this.hidden=!1,o.show(this.$container),this):this},n.prototype.hide=function(){return this.hidden?this:(this.hidden=!0,o.hide(this.$container),this)},n.prototype.destroy=function(){this.$container&&(o.removeElement(this.$container),this.$container=null)},e.UI=n},function(t,e,a){var o=a(3),i=a(8).UI,n=function(t){n.superclass.constructor.call(this,t),this.app=t.app,this.createView()};o.inherit(n,i),n.prototype.createView=function(){this.chartsContainer=o.createElement({tag:"div",class_name:"charts-container",target:this.$container}),this.notes1=o.createElement({tag:"div",class_name:"notes",html:"Note: please reload page after you change device emulation mode to Mobile or after back to Desktop (for apply relevant pointer events)",target:this.$container}),this.notes2=o.createElement({tag:"div",class_name:"notes",html:"PS: All implemented sizes are 50% from original designs (contest style guides). <br><br>Charts created on the fly and shows in data load order.",target:this.$container}),this.switchThemeToDay=o.createElement({tag:"div",class_name:"switch-theme to-day",html:"Switch to Day Mode",target:this.$container}),this.switchThemeToNight=o.createElement({tag:"div",class_name:"switch-theme to-night",html:"Switch to Night Mode",target:this.$container})},e.MainView=n}]);